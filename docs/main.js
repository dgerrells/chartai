var jo=Object.create;var{getPrototypeOf:Ko,defineProperty:fo,getOwnPropertyNames:Yo}=Object;var Bo=Object.prototype.hasOwnProperty;var Uo=(o,z,m)=>{m=o!=null?jo(Ko(o)):{};let M=z||!o||!o.__esModule?fo(m,"default",{value:o,enumerable:!0}):m;for(let A of Yo(o))if(!Bo.call(M,A))fo(M,A,{get:()=>o[A],enumerable:!0});return M};var Ho=((o)=>typeof require!=="undefined"?require:typeof Proxy!=="undefined"?new Proxy(o,{get:(z,m)=>(typeof require!=="undefined"?require:z)[m]}):o)(function(o){if(typeof require!=="undefined")return require.apply(this,arguments);throw Error('Dynamic require of "'+o+'" is not supported')});var i=[];function a(o){if(!i.some((z)=>z.name===o.name))i.push(o)}class N{static instance=null;static MARGIN={left:55,right:10,top:8,bottom:45};static HOVER_MAX_DISTANCE_PX=50;static MIN_ZOOM=0.1;static MAX_ZOOM=1e7;static DEFAULT_LABEL_SIZE=12;static DEFAULT_FONT='-apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif';static resizeCanvas(o,z,m){let M=devicePixelRatio||1;if(o.width=Math.round(z*M),o.height=Math.round(m*M),o instanceof HTMLCanvasElement)o.style.width=`${z}px`,o.style.height=`${m}px`}worker=null;charts=new Map;chartIdCounter=0;_syncViews=!1;_isDark=!1;statsCallbacks=[];currentStats={fps:0,renderMs:0,total:0,active:0};visibilityObserver;resizeObserver;constructor(){this._isDark=document.documentElement.classList.contains("dark"),this.visibilityObserver=new IntersectionObserver((o)=>{for(let z of o){let m=z.target.dataset.chartId;if(m){let M=this.charts.get(m);if(M){if(M.visible=z.isIntersecting,this.worker?.postMessage({type:"set-visibility",id:m,visible:z.isIntersecting}),z.isIntersecting)this.drawChart(M)}}}},{threshold:0.01}),this.resizeObserver=new ResizeObserver((o)=>{for(let z of o){let m=z.target.dataset.chartId;if(!m)continue;let M=this.charts.get(m);if(!M)continue;let{width:A,height:E}=z.contentRect;if(A<=0||E<=0)continue;M.width=A,M.height=E;let Z=devicePixelRatio||1;this.worker?.postMessage({type:"resize",id:m,width:Math.round(A*Z),height:Math.round(E*Z)}),N.resizeCanvas(M.backCanvas,A,E),N.resizeCanvas(M.axisCanvas,A,E),this.drawChart(M)}})}static getInstance(){if(!N.instance)N.instance=new N;return N.instance}get isDark(){return this._isDark}get syncViews(){return this._syncViews}async init(){if(this.worker)return!0;return new Promise((o)=>{import("./worker-inline.js").then(({WORKER_CODE:z})=>{let m=new Blob([z],{type:"application/javascript"}),M=URL.createObjectURL(m);this.worker=new Worker(M,{type:"module"}),this.setupWorkerHandlers(o)}).catch(()=>{let z=new URL("./gpu-worker.js",import.meta.url);this.worker=new Worker(z,{type:"module"}),this.setupWorkerHandlers(o)})})}setupWorkerHandlers(o){if(!this.worker)return;this.worker.onmessage=(z)=>{let{type:m,...M}=z.data;switch(m){case"gpu-ready":o(!0);break;case"error":console.error("ChartManager GPU Error:",M.message),o(!1);break;case"stats":this.currentStats={fps:M.fps,renderMs:M.renderMs,total:M.totalCharts,active:M.activeCharts};for(let A of this.statsCallbacks)A(this.currentStats);break;case"bounds-update":{let A=this.charts.get(M.id);if(A)A.bounds={minX:M.minX,maxX:M.maxX,minY:M.minY,maxY:M.maxY},this.drawChart(A);break}default:break}},this.worker.onerror=(z)=>{console.error("ChartManager Worker Error:",z),o(!1)},this.worker.postMessage({type:"init",isDark:this._isDark})}create(o){if(!this.worker)throw new Error("ChartManager not initialized. Call init() first.");let z=`chart-${++this.chartIdCounter}`,m=document.createElement("div");m.dataset.chartId=z,m.style.cssText="width: 100%; height: 100%; position: relative;";let M=document.createElement("div");M.dataset.chartId=z,M.style.cssText="width: 100%; height: 100%; position: relative;";let A=document.createElement("canvas");A.style.cssText="position: absolute; inset: 0; width: 100%; height: 100%; pointer-events: none;";let E=document.createElement("canvas");E.style.cssText="position: absolute; inset: 0; width: 100%; height: 100%; pointer-events: auto; z-index: 1;";let Z=document.createElement("canvas");Z.style.cssText="position: absolute; inset: 0; width: 100%; height: 100%; pointer-events: none; z-index: 2;",M.appendChild(A),M.appendChild(E),M.appendChild(Z),m.appendChild(M),o.container.appendChild(m);let w;try{w=E.transferControlToOffscreen()}catch(V){throw console.error(`ChartManager: Failed to create offscreen canvas for ${z}:`,V),new Error(`Failed to create chart ${z}: ${V}`)}let O=M.getBoundingClientRect(),$=O.width||400,G=O.height||200;if(N.resizeCanvas(w,$,G),N.resizeCanvas(A,$,G),N.resizeCanvas(Z,$,G),o.bgColor){let[V,J,q]=o.bgColor;M.style.background=`rgb(${Math.round(V*255)},${Math.round(J*255)},${Math.round(q*255)})`}let F={id:z,config:o,el:m,backCanvas:A,axisCanvas:Z,width:$,height:G,series:[],bounds:{minX:0,maxX:1,minY:0,maxY:1},view:{panX:0,panY:0,zoomX:1,zoomY:1},zoomMode:o.zoomMode||"both",visible:!0,dragging:!1,bgColor:o.bgColor,textColor:o.textColor,gridColor:o.gridColor,fontFamily:o.fontFamily,momentum:null,findNearestPoint(V,J,q,H){if(this.series.length===0)return null;let R=V/q,T=J/H,U=this.bounds.maxX-this.bounds.minX,_=this.bounds.maxY-this.bounds.minY,L=U/this.view.zoomX,j=_/this.view.zoomY,X=this.bounds.minX+this.view.panX*U,I=this.bounds.minY+this.view.panY*_,B=X+R*L,W=I+(1-T)*j,y=-1,Q=-1,k=1/0,S=1/0;for(let s=0;s<this.series.length;s++){let g=this.series[s],t=g.rawX.length;if(t===0)continue;let n=0,h=t-1;while(n<h){let c=n+h>>1;if(g.rawX[c]<B)n=c+1;else h=c}let r=n;if(n>0){let c=Math.abs(g.rawX[n]-B);if(Math.abs(g.rawX[n-1]-B)<c)r=n-1}let Zo=Math.abs(g.rawX[r]-B),Vo=Math.abs(g.rawY[r]-W);if(Zo<k||Zo===k&&Vo<S)k=Zo,S=Vo,y=s,Q=r}if(y===-1)return null;let K=this.series[y],u=(K.rawX[Q]-X)/L*q;if(Math.abs(u-V)>N.HOVER_MAX_DISTANCE_PX)return null;return{x:K.rawX[Q],y:K.rawY[Q],index:Q,screenX:V,screenY:J,seriesIndex:y,seriesLabel:K.label}}};this.charts.set(z,F);let f=o.type==="bar"?"box":o.type;this.worker.postMessage({type:"register-chart",id:z,canvas:w,chartType:f,pointSize:o.pointSize??3,maxSamplesPerPixel:o.maxSamplesPerPixel??1e4,bgColor:o.bgColor??null},[w]),this.visibilityObserver.observe(m),this.resizeObserver.observe(M);for(let V of i)V.install?.(F,M);return this.updateSeries(z,o.series),z}destroy(o){let z=this.charts.get(o);if(!z)return;for(let M of i)M.uninstall?.(z);if(z.momentum)cancelAnimationFrame(z.momentum);this.visibilityObserver.unobserve(z.el);let m=z.el.querySelector(".gpu-chart-canvas-wrap");if(m)this.resizeObserver.unobserve(m);z.el.remove(),this.worker?.postMessage({type:"unregister-chart",id:o}),this.charts.delete(o)}updateSeries(o,z){let m=this.charts.get(o);if(!m||!this.worker)return;if(z.length===0)return;m.series=z.map((F)=>{let f=F.x.length;if(f===0)return{label:F.label,color:F.color,rawX:[],rawY:[]};let V=Array.from({length:f},(J,q)=>q);return V.sort((J,q)=>F.x[J]-F.x[q]),{label:F.label,color:F.color,rawX:V.map((J)=>F.x[J]),rawY:V.map((J)=>F.y[J])}});let M=1/0,A=-1/0,E=1/0,Z=-1/0;for(let F of m.series)for(let f=0;f<F.rawX.length;f++){if(F.rawX[f]<M)M=F.rawX[f];if(F.rawX[f]>A)A=F.rawX[f];if(F.rawY[f]<E)E=F.rawY[f];if(F.rawY[f]>Z)Z=F.rawY[f]}let w=(A-M)*0.05||1,O=(Z-E)*0.1||1;M-=w,A+=w,E-=O,Z+=O;let $=m.config.defaultBounds;if($){if($.minX!==void 0)M=$.minX;if($.maxX!==void 0)A=$.maxX;if($.minY!==void 0)E=$.minY;if($.maxY!==void 0)Z=$.maxY}m.bounds={minX:M,maxX:A,minY:E,maxY:Z};let G=m.series.map((F)=>({label:F.label,colorR:F.color.r,colorG:F.color.g,colorB:F.color.b,dataX:new Float32Array(F.rawX),dataY:new Float32Array(F.rawY)}));this.worker.postMessage({type:"update-series",id:o,series:G,bounds:m.bounds},G.flatMap((F)=>[F.dataX.buffer,F.dataY.buffer])),this.sendViewTransform(m),this.drawChart(m)}setPointSize(o,z){if(!this.charts.get(o))return;this.worker?.postMessage({type:"set-point-size",id:o,pointSize:Math.max(1,Math.min(8,Math.round(z)))})}setMaxSamplesPerPixel(o,z){if(!this.charts.get(o))return;this.worker?.postMessage({type:"set-max-samples",id:o,maxSamplesPerPixel:Math.max(0,z|0)})}setStyle(o,z){let m=this.charts.get(o);if(!m)return;if(z.bgColor!==void 0)m.bgColor=z.bgColor;if(z.textColor!==void 0)m.textColor=z.textColor;if(z.gridColor!==void 0)m.gridColor=z.gridColor;if(z.fontFamily!==void 0)m.fontFamily=z.fontFamily;if(z.bgColor!==void 0){let M=m.el.querySelector(".gpu-chart-canvas-wrap");if(M){let[A,E,Z]=z.bgColor;M.style.background=`rgb(${Math.round(A*255)},${Math.round(E*255)},${Math.round(Z*255)})`}this.worker?.postMessage({type:"set-style",id:o,bgColor:z.bgColor})}this.drawChart(m)}setZoomMode(o,z){let m=this.charts.get(o);if(m)m.zoomMode=z}getChartCount(){return this.charts.size}getZoomMode(o){return this.charts.get(o)?.zoomMode||"both"}setSyncViews(o){this._syncViews=o}setTheme(o){this._isDark=o,this.worker?.postMessage({type:"theme",isDark:o});for(let z of this.charts.values())this.drawChart(z)}onStats(o){return this.statsCallbacks.push(o),()=>{let z=this.statsCallbacks.indexOf(o);if(z>=0)this.statsCallbacks.splice(z,1)}}getStats(){return{...this.currentStats}}resetView(o){let z=this.charts.get(o);if(!z)return;if(z.momentum)cancelAnimationFrame(z.momentum),z.momentum=null;let m=z.view.panX,M=z.view.panY,A=z.view.zoomX,E=z.view.zoomY,Z=performance.now(),w=()=>{let O=Math.min(1,(performance.now()-Z)/300),$=1-Math.pow(1-O,3);if(z.view.panX=m*(1-$),z.view.panY=M*(1-$),z.view.zoomX=A+(1-A)*$,z.view.zoomY=E+(1-E)*$,this.sendViewTransform(z),this.drawChart(z),this._syncViews)this.syncAllViews(z);if(O<1)requestAnimationFrame(w)};requestAnimationFrame(w)}sendViewTransform(o){this.worker?.postMessage({type:"view-transform",id:o.id,panX:o.view.panX,panY:o.view.panY,zoomX:o.view.zoomX,zoomY:o.view.zoomY})}syncAllViews(o){let z=[];for(let m of this.charts.values())if(m.id!==o.id)m.view={...o.view},z.push({id:m.id}),this.drawChart(m);if(z.length>0)this.worker?.postMessage({type:"batch-view-transform",panX:o.view.panX,panY:o.view.panY,zoomX:o.view.zoomX,zoomY:o.view.zoomY,transforms:z})}drawChart(o){if(!o.visible)return;let z=devicePixelRatio||1,m=o.backCanvas.getContext("2d");if(m){m.clearRect(0,0,o.backCanvas.width,o.backCanvas.height),m.save(),m.scale(z,z);for(let A of i)A.beforeDraw?.(m,o);m.restore()}let M=o.axisCanvas.getContext("2d");if(M){M.clearRect(0,0,o.axisCanvas.width,o.axisCanvas.height),M.save(),M.scale(z,z);for(let A of i)A.afterDraw?.(M,o);M.restore()}}}var oo=(o,z,m)=>{let M=z-o;if(M<=0)return[o];let A=M/m,E=10**Math.floor(Math.log10(A)),Z=A/E,w=E*(Z<=1.5?1:Z<=3?2:Z<=7?5:10),O=[];for(let $=Math.ceil(o/w)*w;$<=z;$+=w)O.push($);return O},Go=(o)=>{let z=N.getInstance(),m=o.width,M=o.height,A=N.MARGIN,{bounds:E,view:Z}=o,w=E.maxX-E.minX,O=E.maxY-E.minY,$=w/Z.zoomX,G=O/Z.zoomY,F=E.minX+Z.panX*w,f=E.minY+Z.panY*O,V=o.bgColor??(z.isDark?[0.11,0.11,0.12]:[0.98,0.98,0.98]);return{w:m,h:M,m:A,rx:$,ry:G,mx:F,my:f,bg:`${Math.round(V[0]*255)},${Math.round(V[1]*255)},${Math.round(V[2]*255)}`,font:o.fontFamily??N.DEFAULT_FONT,text:o.textColor??(z.isDark?"#c0c0c0":"#333333"),grid:o.gridColor??(z.isDark?"rgba(255,255,255,0.06)":"rgba(0,0,0,0.06)")}},_o={name:"labels",beforeDraw(o,z){let{w:m,h:M,m:A,rx:E,ry:Z,mx:w,my:O,grid:$}=Go(z);o.strokeStyle=$,o.lineWidth=1,o.beginPath(),oo(O,O+Z,7).forEach((G)=>{let F=M*(1-(G-O)/Z);if(F>5&&F<M-A.bottom-5)o.moveTo(A.left,F),o.lineTo(m,F)}),oo(w,w+E,8).forEach((G)=>{let F=m*((G-w)/E);if(F>A.left&&F<m)o.moveTo(F,0),o.lineTo(F,M-A.bottom)}),o.stroke()},afterDraw(o,z){let{w:m,h:M,m:A,rx:E,ry:Z,mx:w,my:O,bg:$,font:G,text:F}=Go(z),{formatX:f=String,formatY:V=String,labelSize:J=N.DEFAULT_LABEL_SIZE}=z.config,q=(H,R,T,U,_)=>{let L=H==="left"?o.createLinearGradient(R,0,R+U,0):o.createLinearGradient(0,T,0,T+_),j=H==="left"?[1,0.7,0.2,0.05,0]:[0,0.05,0.2,0.7,1];[0,0.35,0.55,0.7,1].forEach((X,I)=>L.addColorStop(X,`rgba(${$},${j[I]})`)),o.fillStyle=L,o.fillRect(R,T,U,_)};q("left",0,0,A.left+20,M),q("bottom",0,M-A.bottom-20,m,A.bottom+20),o.font=`${J}px ${G}`,o.fillStyle=F,o.textAlign="right",o.textBaseline="middle",oo(O,O+Z,7).forEach((H)=>{let R=M*(1-(H-O)/Z);if(R>5&&R<M-A.bottom-5)o.fillText(V(H),A.left-5,R)}),o.textAlign="right",o.textBaseline="top",oo(w,w+E,8).forEach((H)=>{let R=m*((H-w)/E);if(R<A.left-10||R>m+30)return;o.save(),o.translate(R,M-A.bottom+5),o.rotate(-Math.PI/14),o.fillText(f(H),0,0),o.restore()})}};function qo(o={}){let z=o.momentumDecay??0.91,m=new WeakMap;return{name:"zoom",install(M,A){let E=N.getInstance(),Z=new AbortController,w={lastX:0,lastY:0,velX:0,velY:0,abort:Z};m.set(M,w);let O=[],$=0,G=0,F=1,f=1,V=0.5,J=0.5,q=()=>{if(E.sendViewTransform(M),E.drawChart(M),E.syncViews)E.syncAllViews(M)},H=()=>{if(M.momentum)cancelAnimationFrame(M.momentum);let _=()=>{if(w.velX*=z,w.velY*=z,Math.abs(w.velX)>0.00005||Math.abs(w.velY)>0.00005){if(M.zoomMode!=="none"&&(M.zoomMode==="both"||M.zoomMode==="x-only"))M.view.panX-=w.velX/M.view.zoomX;if(M.zoomMode!=="none"&&(M.zoomMode==="both"||M.zoomMode==="y-only"))M.view.panY+=w.velY/M.view.zoomY;q(),M.momentum=requestAnimationFrame(_)}else M.momentum=null};M.momentum=requestAnimationFrame(_)},R=()=>{if(M.dragging)M.dragging=!1,O=[]};A.addEventListener("pointerdown",(_)=>{if(M.momentum)cancelAnimationFrame(M.momentum),M.momentum=null;if(O.push(_),A.setPointerCapture(_.pointerId),O.length===1)M.dragging=!0,w.lastX=_.clientX,w.lastY=_.clientY,w.velX=w.velY=0,$=performance.now();else if(O.length===2){let L=A.getBoundingClientRect(),j=O[1].clientX-O[0].clientX,X=O[1].clientY-O[0].clientY;G=Math.hypot(j,X),F=M.view.zoomX,f=M.view.zoomY,V=((O[0].clientX+O[1].clientX)/2-L.left)/L.width,J=1-((O[0].clientY+O[1].clientY)/2-L.top)/L.height}},{signal:Z.signal}),A.addEventListener("pointermove",(_)=>{let L=O.findIndex((j)=>j.pointerId===_.pointerId);if(L>=0)O[L]=_;if(O.length===1&&M.dragging){let j=A.getBoundingClientRect(),X=(_.clientX-w.lastX)/j.width,I=(_.clientY-w.lastY)/j.height,B=performance.now();if(B-$<100)w.velX=w.velX*0.5+X*0.5,w.velY=w.velY*0.5+I*0.5;if($=B,M.zoomMode!=="none"&&(M.zoomMode==="both"||M.zoomMode==="x-only"))M.view.panX-=X/M.view.zoomX;if(M.zoomMode!=="none"&&(M.zoomMode==="both"||M.zoomMode==="y-only"))M.view.panY+=I/M.view.zoomY;w.lastX=_.clientX,w.lastY=_.clientY,q()}else if(O.length===2){let j=O[1].clientX-O[0].clientX,X=O[1].clientY-O[0].clientY,B=Math.hypot(j,X)/G;if(M.zoomMode!=="none"&&(M.zoomMode==="both"||M.zoomMode==="x-only")){let W=Math.max(N.MIN_ZOOM,Math.min(N.MAX_ZOOM,F*B)),y=M.view.panX+V/F;M.view.zoomX=W,M.view.panX=y-V/W}if(M.zoomMode!=="none"&&(M.zoomMode==="both"||M.zoomMode==="y-only")){let W=Math.max(N.MIN_ZOOM,Math.min(N.MAX_ZOOM,f*B)),y=M.view.panY+J/f;M.view.zoomY=W,M.view.panY=y-J/W}q()}},{signal:Z.signal});let T=(_)=>{if(O=O.filter((L)=>L.pointerId!==_.pointerId),A.releasePointerCapture(_.pointerId),O.length===0&&M.dragging){if(M.dragging=!1,Math.abs(w.velX)>0.001||Math.abs(w.velY)>0.001)H()}};A.addEventListener("pointerup",T,{signal:Z.signal}),A.addEventListener("pointercancel",T,{signal:Z.signal}),A.addEventListener("pointerleave",R,{signal:Z.signal});let U=0;A.addEventListener("pointerup",()=>{let _=Date.now();if(_-U<300)E.resetView(M.id);U=_},{signal:Z.signal}),A.addEventListener("wheel",(_)=>{if(_.preventDefault(),M.momentum)cancelAnimationFrame(M.momentum),M.momentum=null;let L=A.getBoundingClientRect(),j=_.clientX-L.left,X=_.clientY-L.top,I=j/L.width,B=1-X/L.height,W=1-_.deltaY*0.002,y=N.MARGIN,Q=j<y.left,k=X>L.height-y.bottom,S,K;if(Q)S=!1,K=!0;else if(k)S=!0,K=!1;else S=M.zoomMode==="both"||M.zoomMode==="x-only",K=M.zoomMode==="both"||M.zoomMode==="y-only";if(S){let x=M.view.panX+I/M.view.zoomX;M.view.zoomX=Math.max(N.MIN_ZOOM,Math.min(N.MAX_ZOOM,M.view.zoomX*W)),M.view.panX=x-I/M.view.zoomX}if(K){let x=M.view.panY+B/M.view.zoomY;M.view.zoomY=Math.max(N.MIN_ZOOM,Math.min(N.MAX_ZOOM,M.view.zoomY*W)),M.view.panY=x-B/M.view.zoomY}if(S||K)q()},{passive:!1,signal:Z.signal})},uninstall(M){let A=m.get(M);if(A){if(M.momentum)cancelAnimationFrame(M.momentum),M.momentum=null;A.abort.abort(),m.delete(M)}}}}var Mo=new WeakMap,Xo=(o,z,m,M,A,E,Z,w)=>{o.beginPath(),o.roundRect(z,m,M,A,E),o.fillStyle=Z,o.fill(),o.strokeStyle=w,o.lineWidth=1.5,o.stroke()},No={name:"hover",install(o,z){let m=N.getInstance(),M=new AbortController,A={hoverResult:null,pillX:0,pillY:0,pillTargetX:0,pillTargetY:0,pillAnimRef:null,abort:M};Mo.set(o,A);let E=(Z)=>{if(o.config.onHover)o.config.onHover(Z);if(!(o.config.showTooltip??!1))return;if(A.hoverResult=Z,m.drawChart(o),Z&&!A.pillAnimRef){let w=performance.now(),O=($)=>{if(!A.hoverResult)return A.pillAnimRef=null;let G=1-Math.pow(0.5,($-w)/(o.config.pillDecayMs??60));w=$,A.pillX+=(A.pillTargetX-A.pillX)*G,A.pillY+=(A.pillTargetY-A.pillY)*G,m.drawChart(o),A.pillAnimRef=requestAnimationFrame(O)};A.pillAnimRef=requestAnimationFrame(O)}};z.addEventListener("mousemove",(Z)=>{if(o.dragging)return;let w=z.getBoundingClientRect();E(o.findNearestPoint(Z.clientX-w.left,Z.clientY-w.top,w.width,w.height))},{signal:M.signal}),["mouseleave","pointerdown"].forEach((Z)=>z.addEventListener(Z,()=>E(null),{signal:M.signal}))},afterDraw(o,z){let m=Mo.get(z);if(!m?.hoverResult||!z.config.showTooltip)return;let{hoverResult:M}=m,A=z.width,E=z.height,Z=N.MARGIN,w=N.getInstance().isDark,{formatX:O=String,formatY:$=String,fontFamily:G=N.DEFAULT_FONT}=z.config,F=(z.bounds.maxX-z.bounds.minX)/z.view.zoomX,f=(z.bounds.maxY-z.bounds.minY)/z.view.zoomY,V=(M.x-(z.bounds.minX+z.view.panX*(z.bounds.maxX-z.bounds.minX)))/F*A,J=E*(1-(M.y-(z.bounds.minY+z.view.panY*(z.bounds.maxY-z.bounds.minY)))/f),q=z.series[M.seriesIndex]||z.series[0],H=`${Math.round(q.color.r*255)},${Math.round(q.color.g*255)},${Math.round(q.color.b*255)}`,R=`rgb(${H})`,T=w?`oklch(from ${R} calc(l + 0.1) c h)`:R;o.save(),o.setLineDash([4,3]),o.strokeStyle=`rgba(${H},0.4)`,o.stroke(new Path2D(`M${V} 0V${E-Z.bottom}M${Z.left} ${J}H${A}`)),o.restore(),o.beginPath(),o.arc(V,J,4.5,0,Math.PI*2),o.fillStyle=R,o.fill(),o.strokeStyle=w?"rgba(0,0,0,0.6)":"rgba(255,255,255,0.9)",o.stroke();let U=z.series.map((Q)=>{let k=0,S=Q.rawX.length-1;while(k<=S){let K=k+S>>1;if(Math.abs(Q.rawX[K]-M.x)<0.0001)return{label:Q.label,val:$(Q.rawY[K]),rawVal:Q.rawY[K],col:`rgb(${Math.round(Q.color.r*255)},${Math.round(Q.color.g*255)},${Math.round(Q.color.b*255)})`};Q.rawX[K]<M.x?k=K+1:S=K-1}return null}).filter(Boolean);U.sort((Q,k)=>Math.abs(k.rawVal)-Math.abs(Q.rawVal));let _=U.length,L=U.slice(0,5),j=_-L.length;if(m.pillTargetX=V,m.pillTargetY=J,!m.pillAnimRef)m.pillX=V,m.pillY=J;let X=(Q,k,S,K)=>{o.font=`600 10px ${G}`;let x=o.measureText(S).width,u=x+12,e=18,s=K?Q-u/2:Q-u,g=K?k:k-e/2;o.save();let t=K?Math.atan((m.pillTargetX-m.pillX)/80)*0.2:Math.atan((m.pillTargetY-m.pillY)/80)*0.2;o.translate(Q,k),o.rotate(t);let n=K?-u/2:-u,h=K?0:-e/2;o.beginPath(),o.roundRect(n,h,u,e,4),o.fillStyle=w?"rgba(0,0,0,0.75)":"rgba(255,255,255,0.75)",o.fill(),o.fillStyle=`rgba(${H},0.2)`,o.fill(),o.strokeStyle=T,o.lineWidth=1.5,o.stroke(),o.fillStyle=T,o.textAlign="center",o.textBaseline="middle",o.fillText(S,n+u/2,h+e/2),o.restore()};X(Math.max(Z.left,Math.min(A-Z.right,m.pillX)),E-Z.bottom+4,O(M.x),!0),X(Math.max(Z.left,Z.left),Math.max(9,Math.min(E-Z.bottom-9,m.pillY)),$(M.y),!1);let I=Math.max(...L.map((Q)=>o.measureText(Q.label+Q.val).width))+40,B=30+L.length*18+(j>0?18:0),W=M.screenX+14,y=M.screenY-B-6;if(W+I>A)W=M.screenX-I-14;if(y=Math.max(4,Math.min(E-B-4,M.screenY-B-6)),Xo(o,W,y,I,B,6,w?"rgba(28,28,30,0.95)":"rgba(255,255,255,0.96)","rgba(0,0,0,0.08)"),o.textAlign="left",o.textBaseline="middle",o.fillStyle=w?"#888":"#999",o.fillText(O(M.x),W+10,y+15),L.forEach((Q,k)=>{let S=y+35+k*18;o.fillStyle=Q.col,o.beginPath(),o.roundRect(W+10,S-4,8,8,2),o.fill(),o.fillStyle=w?"#eee":"#1a1a1a",o.fillText(`${Q.label}: ${Q.val}`,W+24,S)}),j>0){let Q=y+35+L.length*18;o.fillStyle=w?"#666":"#aaa",o.fillText(`+${j} more`,W+10,Q)}},uninstall(o){let z=Mo.get(o);if(z?.pillAnimRef)cancelAnimationFrame(z.pillAnimRef);z?.abort.abort(),Mo.delete(o)}};a(_o);a(qo());a(No);var Y,d=document.documentElement.classList.contains("dark"),Qo=1,Eo=null,$o=!1,Lo,Ro,To,P=[],l=[],D=[],v=[],wo=null,Oo=null,Fo=null;function Wo(o,z,m){let M=(1-Math.abs(2*m-1))*z,A=M*(1-Math.abs(o/60%2-1)),E=m-M/2,Z=0,w=0,O=0;if(o<60)Z=M,w=A;else if(o<120)Z=A,w=M;else if(o<180)w=M,O=A;else if(o<240)w=A,O=M;else if(o<300)Z=A,O=M;else Z=M,O=A;return{r:Z+E,g:w+E,b:O+E}}function zo(){return Wo(Math.random()*360,0.65+Math.random()*0.2,0.5+Math.random()*0.1)}var So=new Date("2026-02-03");function b(o){if(o>=1000)return"$"+(o/1000).toFixed(1)+"k";if(o>=100)return"$"+o.toFixed(0);if(o>=10)return"$"+o.toFixed(1);return"$"+o.toFixed(2)}function mo(o){let z=So.getTime()-Math.round(o)*60000,m=new Date(z),A=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][m.getMonth()],E=m.getDate(),Z=m.getFullYear();return`${A} ${E}, ${Z}`}function Ao(o){if(Math.abs(o)>=1000)return(o/1000).toFixed(1)+"k";if(Math.abs(o)>=100)return o.toFixed(0);if(Math.abs(o)>=10)return o.toFixed(1);return o.toFixed(2)}function p(o){return Math.round(o).toString()}function C(o,z){let m=new Array(o),M=new Array(o);if(z==="stock")for(let Z=0;Z<o;Z++)m[Z]=o-1-Z;else for(let Z=0;Z<o;Z++)m[Z]=Z;let E=2*Math.PI;switch(z){case"stock":{let w=Math.LN2/5258880,O=-w*3,$=0.0005,G=0.0009000000000000001,F=o/5258880,f=Math.max(1,Math.round(F*(0.8+Math.random()*0.4))),V=[];for(let T=0;T<f;T++){let U=Math.floor(Math.random()*o*0.9),_=Math.floor((180+Math.random()*360)*1440);V.push({s:U,e:U+_})}V.sort((T,U)=>T.s-U.s);let J=Math.log(10+Math.random()*20),q=0,H=0,R=!1;for(let T=0;T<o;T++){while(q<V.length&&T>=V[q].e)q++;let U=q<V.length&&T>=V[q].s&&T<V[q].e,_=U?O:w,L=U?0.0009000000000000001:0.0005,j;if(R)j=H,R=!1;else{let X=Math.random()||0.0000000001,I=Math.sqrt(-2*Math.log(X)),B=E*Math.random();j=I*Math.cos(B),H=I*Math.sin(B),R=!0}J+=_+L*j,M[T]=Math.exp(J)}break}case"trending":{let Z=Math.log(20+Math.random()*20),w=Math.LN2/o,O=0.015,$=0,G=!1;for(let F=0;F<o;F++){let f;if(G)f=$,G=!1;else{let V=Math.random()||0.0000000001,J=Math.sqrt(-2*Math.log(V)),q=E*Math.random();f=J*Math.cos(q),$=J*Math.sin(q),G=!0}Z+=w+O*f,M[F]=Math.exp(Z)}break}case"declining":{let Z=Math.log(60+Math.random()*40),w=-Math.LN2/o,O=0.015,$=0,G=!1;for(let F=0;F<o;F++){let f;if(G)f=$,G=!1;else{let V=Math.random()||0.0000000001,J=Math.sqrt(-2*Math.log(V)),q=E*Math.random();f=J*Math.cos(q),$=J*Math.sin(q),G=!0}Z+=w+O*f,M[F]=Math.exp(Z)}break}case"spikey":{let Z=20+Math.random()*30,w=3+Math.floor(Math.random()*5),O=new Set;while(O.size<Math.min(w,o))O.add(Math.floor(Math.random()*o));let $=Z*1.2,G=Z*5;for(let F=0;F<o;F++)if(O.has(F))M[F]=Math.random()<0.5?-G:G;else M[F]=(Math.random()-0.5)*$;break}case"cyclic":{let Z=Date.now()%1e5/1e5*E,w=30+Math.random()*20,O=50+Math.random()*20,$=2+Math.random()*4,G=E*$/o,F=w*0.25;for(let f=0;f<o;f++){let V=f*G+Z;M[f]=O+Math.sin(V)*w+Math.sin(V*2.7+1.3)*F+(Math.random()-0.5)*8}break}}return{x:m,y:M}}async function Io(){if(Y=N.getInstance(),!await Y.init()){alert("WebGPU not available. Please use a supported browser.");return}po(),yo(),ko(),Po(),Co(),no(),bo()}function yo(){let o=C(25,"trending");Y.create({type:"bar",container:document.getElementById("basic-bar"),series:[{label:"Revenue",color:{r:0.6,g:0.4,b:0.9},x:o.x,y:o.y}],formatX:p,formatY:b,showTooltip:!0});let z=C(1000,"trending"),m=z.x.map((A,E)=>999-E);Y.create({type:"line",container:document.getElementById("basic-line"),series:[{label:"Stock Price",color:{r:0.3,g:0.6,b:1},x:m,y:z.y}],formatX:mo,formatY:b,showTooltip:!0});let M=C(5000,"cyclic");Y.create({type:"scatter",container:document.getElementById("basic-scatter"),series:[{label:"Cyclic Data",color:{r:1,g:0.4,b:0.4},x:M.x,y:M.y}],formatX:p,formatY:Ao,showTooltip:!0})}function ko(){let o=[],z=C(25,"trending"),m=[1,0.7,1.3];for(let E=0;E<3;E++){let Z=C(25,"trending"),w=Z.y.map((O)=>O*m[E]);o.push({label:`Series ${E+1}`,color:zo(),x:Z.x,y:w})}Y.create({type:"bar",container:document.getElementById("series-bar"),series:o,formatX:p,formatY:b,showTooltip:!0});let M=[];for(let E=0;E<3;E++){let Z=C(1000,"trending"),w=Z.x.map((O,$)=>999-$);M.push({label:`Series ${E+1}`,color:zo(),x:w,y:Z.y})}Y.create({type:"line",container:document.getElementById("series-line"),series:M,formatX:mo,formatY:b,showTooltip:!0});let A=[];for(let E=0;E<3;E++){let Z=C(5000,"cyclic");A.push({label:`Series ${E+1}`,color:zo(),x:Z.x,y:Z.y})}Y.create({type:"scatter",container:document.getElementById("series-scatter"),series:A,formatX:p,formatY:Ao,showTooltip:!0})}function Po(){let o=C(1e5,"spikey");Y.create({type:"line",container:document.getElementById("spikes-line"),series:[{label:"Volatile Data",color:{r:1,g:0.5,b:0.2},x:o.x,y:o.y}],formatX:p,formatY:Ao,showTooltip:!0})}function Co(){let o=C(100,"trending"),z=C(100,"trending"),m=C(100,"trending");P=Array.from({length:100},(E,Z)=>Z),l=[...o.y],D=[...z.y],v=[...m.y],Lo=Y.create({type:"line",container:document.getElementById("live-line"),series:[{label:"Live Data",color:{r:0.2,g:0.8,b:0.4},x:[...P],y:[...l]}],formatX:p,formatY:b,showTooltip:!0}),Ro=Y.create({type:"scatter",container:document.getElementById("live-scatter"),series:[{label:"Live Data",color:{r:0.9,g:0.3,b:0.7},x:[...P],y:[...D]}],formatX:p,formatY:b,showTooltip:!0}),To=Y.create({type:"line",container:document.getElementById("live-line2"),series:[{label:"Live Data",color:{r:0.4,g:0.5,b:1},x:[...P],y:[...v]}],formatX:p,formatY:b,showTooltip:!0});let M=document.querySelectorAll(".speed-btn");M.forEach((E)=>{E.addEventListener("click",()=>{M.forEach((Z)=>Z.classList.remove("active")),E.classList.add("active"),Qo=parseInt(E.dataset.speed),Jo()})});let A=document.getElementById("accumulate-toggle");A.addEventListener("change",()=>{$o=A.checked}),Jo()}function Jo(){if(Eo!==null)clearInterval(Eo);let o=1000/Qo;Eo=window.setInterval(()=>{let z=P.length>0?P[P.length-1]+1:0,m=l.length>0?l[l.length-1]:50,M=D.length>0?D[D.length-1]:50,A=v.length>0?v[v.length-1]:50;if(P.push(z),l.push(m+(Math.random()-0.5)*5),D.push(M+(Math.random()-0.5)*8),v.push(A+(Math.random()-0.5)*6),!$o&&P.length>500)P.shift(),l.shift(),D.shift(),v.shift();Y.updateSeries(Lo,[{label:"Live Data",color:{r:0.2,g:0.8,b:0.4},x:[...P],y:[...l]}]),Y.updateSeries(Ro,[{label:"Live Data",color:{r:0.9,g:0.3,b:0.7},x:[...P],y:[...D]}]),Y.updateSeries(To,[{label:"Live Data",color:{r:0.4,g:0.5,b:1},x:[...P],y:[...v]}]);let E=$o?"Accumulate":"Ring Buffer";document.getElementById("live-stats").textContent=`Points: ${P.length} (${E})`},o)}function no(){let o=document.getElementById("bigdata-generate"),z=document.getElementById("bigdata-count"),m=document.getElementById("bigdata-stats");o.addEventListener("click",()=>{let M=parseInt(z.value)||1e6;o.setAttribute("disabled","true"),m.textContent="Generating...",setTimeout(()=>{let A=performance.now();if(wo)Y.destroy(wo);if(Oo)Y.destroy(Oo);let E=C(M,"stock"),Z=C(M,"cyclic");wo=Y.create({type:"line",container:document.getElementById("bigdata-line"),series:[{label:"Big Data",color:{r:0.3,g:0.7,b:0.9},x:E.x,y:E.y}],formatX:mo,formatY:b,showTooltip:!0}),Oo=Y.create({type:"scatter",container:document.getElementById("bigdata-scatter"),series:[{label:"Big Data",color:{r:0.9,g:0.5,b:0.3},x:Z.x,y:Z.y}],formatX:p,formatY:Ao,showTooltip:!0});let w=performance.now()-A,O=(M/1e6).toFixed(1)+"M";document.getElementById("bigdata-line-info").textContent=O,document.getElementById("bigdata-scatter-info").textContent=O,m.textContent=`Generated in ${w.toFixed(0)}ms`,o.removeAttribute("disabled")},50)})}function bo(){let o=document.getElementById("bigseries-generate"),z=document.getElementById("bigseries-series"),m=document.getElementById("bigseries-points"),M=document.getElementById("bigseries-stats");o.addEventListener("click",()=>{let A=parseInt(z.value)||1000,E=parseInt(m.value)||1000;o.setAttribute("disabled","true"),M.textContent="Generating...",setTimeout(()=>{let Z=performance.now();if(Fo)Y.destroy(Fo);let w=[];for(let F=0;F<A;F++){let f=C(E,"trending"),V=f.x.map((J,q)=>E-1-q);w.push({label:`S${F+1}`,color:zo(),x:V,y:f.y})}Fo=Y.create({type:"line",container:document.getElementById("bigseries-line"),series:w,formatX:mo,formatY:b,showTooltip:!0});let O=performance.now()-Z,$=A*E,G=$>=1e6?($/1e6).toFixed(1)+"M":($/1000).toFixed(0)+"k";document.getElementById("bigseries-info").textContent=`${A} series Ã— ${E} pts = ${G} total`,M.textContent=`Generated in ${O.toFixed(0)}ms`,o.removeAttribute("disabled")},50)})}function po(){let o=document.getElementById("theme-btn"),z=document.getElementById("theme-icon-sun"),m=document.getElementById("theme-icon-moon"),M=()=>{z.style.display=d?"none":"block",m.style.display=d?"block":"none"};M(),o.addEventListener("click",()=>{d=!d,document.documentElement.classList.toggle("dark",d),localStorage.setItem("theme",d?"dark":"light"),Y.setTheme(d),M()})}Io();
