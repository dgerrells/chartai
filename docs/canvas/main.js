var y0=Object.create;var{getPrototypeOf:u0,defineProperty:H0,getOwnPropertyNames:v0}=Object;var g0=Object.prototype.hasOwnProperty;var m0=($,q,Q)=>{Q=$!=null?y0(u0($)):{};let B=q||!$||!$.__esModule?H0(Q,"default",{value:$,enumerable:!0}):Q;for(let J of v0($))if(!g0.call(B,J))H0(B,J,{get:()=>$[J],enumerable:!0});return B};var x0=(($)=>typeof require!=="undefined"?require:typeof Proxy!=="undefined"?new Proxy($,{get:(q,Q)=>(typeof require!=="undefined"?require:q)[Q]}):$)(function($){if(typeof require!=="undefined")return require.apply(this,arguments);throw Error('Dynamic require of "'+$+'" is not supported')});var r=[];function Q0($){if(!r.some((q)=>q.name===$.name))r.push($)}class E{static instance=null;static MARGIN={left:55,right:10,top:8,bottom:45};static HOVER_MAX_DISTANCE_PX=50;static MIN_ZOOM=0.1;static MAX_ZOOM=1e7;static DEFAULT_LABEL_SIZE=12;static DEFAULT_FONT='-apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif';static resizeCanvas($,q,Q){let B=devicePixelRatio||1;if($.width=Math.round(q*B),$.height=Math.round(Q*B),$ instanceof HTMLCanvasElement)$.style.width=`${q}px`,$.style.height=`${Q}px`}worker=null;charts=new Map;chartIdCounter=0;_syncViews=!1;_isDark=!1;statsCallbacks=[];currentStats={fps:0,renderMs:0,total:0,active:0};visibilityObserver;resizeObserver;constructor(){this._isDark=document.documentElement.classList.contains("dark"),this.visibilityObserver=new IntersectionObserver(($)=>{for(let q of $){let Q=q.target.dataset.chartId;if(Q){let B=this.charts.get(Q);if(B){if(B.visible=q.isIntersecting,this.worker?.postMessage({type:"set-visibility",id:Q,visible:q.isIntersecting}),q.isIntersecting)this.drawChart(B)}}}},{threshold:0.01}),this.resizeObserver=new ResizeObserver(($)=>{for(let q of $){let Q=q.target.dataset.chartId;if(!Q)continue;let B=this.charts.get(Q);if(!B)continue;let{width:J,height:K}=q.contentRect;if(J<=0||K<=0)continue;B.width=J,B.height=K;let j=devicePixelRatio||1;this.worker?.postMessage({type:"resize",id:Q,width:Math.round(J*j),height:Math.round(K*j)}),E.resizeCanvas(B.backCanvas,J,K),E.resizeCanvas(B.axisCanvas,J,K),this.drawChart(B)}})}static getInstance(){if(!E.instance)E.instance=new E;return E.instance}get isDark(){return this._isDark}get syncViews(){return this._syncViews}async init(){if(this.worker)return!0;return new Promise(($)=>{import("./worker-inline.js").then(({WORKER_CODE:q})=>{let Q=new Blob([q],{type:"application/javascript"}),B=URL.createObjectURL(Q);this.worker=new Worker(B,{type:"module"}),this.setupWorkerHandlers($)}).catch(()=>{let q=new URL("./gpu-worker.js",import.meta.url);this.worker=new Worker(q,{type:"module"}),this.setupWorkerHandlers($)})})}setupWorkerHandlers($){if(!this.worker)return;this.worker.onmessage=(q)=>{let{type:Q,...B}=q.data;switch(Q){case"gpu-ready":$(!0);break;case"error":console.error("ChartManager GPU Error:",B.message),$(!1);break;case"stats":this.currentStats={fps:B.fps,renderMs:B.renderMs,total:B.totalCharts,active:B.activeCharts};for(let J of this.statsCallbacks)J(this.currentStats);break;case"bounds-update":{let J=this.charts.get(B.id);if(J)J.bounds={minX:B.minX,maxX:B.maxX,minY:B.minY,maxY:B.maxY},this.drawChart(J);break}default:break}},this.worker.onerror=(q)=>{console.error("ChartManager Worker Error:",q),$(!1)},this.worker.postMessage({type:"init",isDark:this._isDark})}create($){if(!this.worker)throw new Error("ChartManager not initialized. Call init() first.");let q=`chart-${++this.chartIdCounter}`,Q=document.createElement("div");Q.dataset.chartId=q,Q.style.cssText="width: 100%; height: 100%; position: relative;";let B=document.createElement("div");B.dataset.chartId=q,B.style.cssText="width: 100%; height: 100%; position: relative;";let J=document.createElement("canvas");J.style.cssText="position: absolute; inset: 0; width: 100%; height: 100%; pointer-events: none;";let K=document.createElement("canvas");K.style.cssText="position: absolute; inset: 0; width: 100%; height: 100%; pointer-events: auto; z-index: 1;";let j=document.createElement("canvas");j.style.cssText="position: absolute; inset: 0; width: 100%; height: 100%; pointer-events: none; z-index: 2;",B.appendChild(J),B.appendChild(K),B.appendChild(j),Q.appendChild(B),$.container.appendChild(Q);let F;try{F=K.transferControlToOffscreen()}catch(_){throw console.error(`ChartManager: Failed to create offscreen canvas for ${q}:`,_),new Error(`Failed to create chart ${q}: ${_}`)}let G=B.getBoundingClientRect(),L=G.width||400,U=G.height||200;if(E.resizeCanvas(F,L,U),E.resizeCanvas(J,L,U),E.resizeCanvas(j,L,U),$.bgColor){let[_,k,H]=$.bgColor;B.style.background=`rgb(${Math.round(_*255)},${Math.round(k*255)},${Math.round(H*255)})`}let V={id:q,config:$,el:Q,backCanvas:J,axisCanvas:j,width:L,height:U,series:[],bounds:{minX:0,maxX:1,minY:0,maxY:1},view:{panX:0,panY:0,zoomX:1,zoomY:1},zoomMode:$.zoomMode||"both",visible:!0,dragging:!1,bgColor:$.bgColor,textColor:$.textColor,gridColor:$.gridColor,fontFamily:$.fontFamily,momentum:null,findNearestPoint(_,k,H,P){if(this.series.length===0)return null;let I=_/H,f=k/P,Y=this.bounds.maxX-this.bounds.minX,o=this.bounds.maxY-this.bounds.minY,O=Y/this.view.zoomX,i=o/this.view.zoomY,n=this.bounds.minX+this.view.panX*Y,m=this.bounds.minY+this.view.panY*o,M=n+I*O,A=m+(1-f)*i,S=-1,N=-1,z=1/0,D=1/0;for(let s=0;s<this.series.length;s++){let y=this.series[s],x=y.rawX.length;if(x===0)continue;let C=0,c=x-1;while(C<c){let t=C+c>>1;if(y.rawX[t]<M)C=t+1;else c=t}let J0=C;if(C>0){let t=Math.abs(y.rawX[C]-M);if(Math.abs(y.rawX[C-1]-M)<t)J0=C-1}let F0=Math.abs(y.rawX[J0]-M),S0=Math.abs(y.rawY[J0]-A);if(F0<z||F0===z&&S0<D)z=F0,D=S0,S=s,N=J0}if(S===-1)return null;let W=this.series[S],X=(W.rawX[N]-n)/O*H;if(Math.abs(X-_)>E.HOVER_MAX_DISTANCE_PX)return null;return{x:W.rawX[N],y:W.rawY[N],index:N,screenX:_,screenY:k,seriesIndex:S,seriesLabel:W.label}}};this.charts.set(q,V);let R=$.type==="bar"?"box":$.type;this.worker.postMessage({type:"register-chart",id:q,canvas:F,chartType:R,pointSize:$.pointSize??3,maxSamplesPerPixel:$.maxSamplesPerPixel??1e4,bgColor:$.bgColor??null},[F]),this.visibilityObserver.observe(Q),this.resizeObserver.observe(B);for(let _ of r)_.install?.(V,B);return this.updateSeries(q,$.series),q}destroy($){let q=this.charts.get($);if(!q)return;for(let B of r)B.uninstall?.(q);if(q.momentum)cancelAnimationFrame(q.momentum);this.visibilityObserver.unobserve(q.el);let Q=q.el.querySelector(".gpu-chart-canvas-wrap");if(Q)this.resizeObserver.unobserve(Q);q.el.remove(),this.worker?.postMessage({type:"unregister-chart",id:$}),this.charts.delete($)}updateSeries($,q){let Q=this.charts.get($);if(!Q||!this.worker)return;if(q.length===0)return;Q.series=q.map((V)=>{let R=V.x.length;if(R===0)return{label:V.label,color:V.color,rawX:[],rawY:[]};let _=Array.from({length:R},(k,H)=>H);return _.sort((k,H)=>V.x[k]-V.x[H]),{label:V.label,color:V.color,rawX:_.map((k)=>V.x[k]),rawY:_.map((k)=>V.y[k])}});let B=1/0,J=-1/0,K=1/0,j=-1/0;for(let V of Q.series)for(let R=0;R<V.rawX.length;R++){if(V.rawX[R]<B)B=V.rawX[R];if(V.rawX[R]>J)J=V.rawX[R];if(V.rawY[R]<K)K=V.rawY[R];if(V.rawY[R]>j)j=V.rawY[R]}let F=(J-B)*0.05||1,G=(j-K)*0.1||1;B-=F,J+=F,K-=G,j+=G;let L=Q.config.defaultBounds;if(L){if(L.minX!==void 0)B=L.minX;if(L.maxX!==void 0)J=L.maxX;if(L.minY!==void 0)K=L.minY;if(L.maxY!==void 0)j=L.maxY}Q.bounds={minX:B,maxX:J,minY:K,maxY:j};let U=Q.series.map((V)=>({label:V.label,colorR:V.color.r,colorG:V.color.g,colorB:V.color.b,dataX:new Float32Array(V.rawX),dataY:new Float32Array(V.rawY)}));this.worker.postMessage({type:"update-series",id:$,series:U,bounds:Q.bounds},U.flatMap((V)=>[V.dataX.buffer,V.dataY.buffer])),this.sendViewTransform(Q),this.drawChart(Q)}setPointSize($,q){if(!this.charts.get($))return;this.worker?.postMessage({type:"set-point-size",id:$,pointSize:Math.max(1,Math.min(8,Math.round(q)))})}setMaxSamplesPerPixel($,q){if(!this.charts.get($))return;this.worker?.postMessage({type:"set-max-samples",id:$,maxSamplesPerPixel:Math.max(0,q|0)})}setStyle($,q){let Q=this.charts.get($);if(!Q)return;if(q.bgColor!==void 0)Q.bgColor=q.bgColor;if(q.textColor!==void 0)Q.textColor=q.textColor;if(q.gridColor!==void 0)Q.gridColor=q.gridColor;if(q.fontFamily!==void 0)Q.fontFamily=q.fontFamily;if(q.bgColor!==void 0){let B=Q.el.querySelector(".gpu-chart-canvas-wrap");if(B){let[J,K,j]=q.bgColor;B.style.background=`rgb(${Math.round(J*255)},${Math.round(K*255)},${Math.round(j*255)})`}this.worker?.postMessage({type:"set-style",id:$,bgColor:q.bgColor})}this.drawChart(Q)}setZoomMode($,q){let Q=this.charts.get($);if(Q)Q.zoomMode=q}getChartCount(){return this.charts.size}getZoomMode($){return this.charts.get($)?.zoomMode||"both"}setSyncViews($){this._syncViews=$}setTheme($){this._isDark=$,this.worker?.postMessage({type:"theme",isDark:$});for(let q of this.charts.values())this.drawChart(q)}onStats($){return this.statsCallbacks.push($),()=>{let q=this.statsCallbacks.indexOf($);if(q>=0)this.statsCallbacks.splice(q,1)}}getStats(){return{...this.currentStats}}resetView($){let q=this.charts.get($);if(!q)return;if(q.momentum)cancelAnimationFrame(q.momentum),q.momentum=null;let Q=q.view.panX,B=q.view.panY,J=q.view.zoomX,K=q.view.zoomY,j=performance.now(),F=()=>{let G=Math.min(1,(performance.now()-j)/300),L=1-Math.pow(1-G,3);if(q.view.panX=Q*(1-L),q.view.panY=B*(1-L),q.view.zoomX=J+(1-J)*L,q.view.zoomY=K+(1-K)*L,this.sendViewTransform(q),this.drawChart(q),this._syncViews)this.syncAllViews(q);if(G<1)requestAnimationFrame(F)};requestAnimationFrame(F)}sendViewTransform($){this.worker?.postMessage({type:"view-transform",id:$.id,panX:$.view.panX,panY:$.view.panY,zoomX:$.view.zoomX,zoomY:$.view.zoomY})}syncAllViews($){let q=[];for(let Q of this.charts.values())if(Q.id!==$.id)Q.view={...$.view},q.push({id:Q.id}),this.drawChart(Q);if(q.length>0)this.worker?.postMessage({type:"batch-view-transform",panX:$.view.panX,panY:$.view.panY,zoomX:$.view.zoomX,zoomY:$.view.zoomY,transforms:q})}drawChart($){if(!$.visible)return;let q=devicePixelRatio||1,Q=$.backCanvas.getContext("2d");if(Q){Q.clearRect(0,0,$.backCanvas.width,$.backCanvas.height),Q.save(),Q.scale(q,q);for(let J of r)J.beforeDraw?.(Q,$);Q.restore()}let B=$.axisCanvas.getContext("2d");if(B){B.clearRect(0,0,$.axisCanvas.width,$.axisCanvas.height),B.save(),B.scale(q,q);for(let J of r)J.afterDraw?.(B,$);B.restore()}}}var j0=($,q,Q)=>{let B=q-$;if(B<=0)return[$];let J=B/Q,K=10**Math.floor(Math.log10(J)),j=J/K,F=K*(j<=1.5?1:j<=3?2:j<=7?5:10),G=[];for(let L=Math.ceil($/F)*F;L<=q;L+=F)G.push(L);return G},k0=($)=>{let q=E.getInstance(),Q=$.width,B=$.height,J=E.MARGIN,{bounds:K,view:j}=$,F=K.maxX-K.minX,G=K.maxY-K.minY,L=F/j.zoomX,U=G/j.zoomY,V=K.minX+j.panX*F,R=K.minY+j.panY*G,_=$.bgColor??(q.isDark?[0.11,0.11,0.12]:[0.98,0.98,0.98]);return{w:Q,h:B,m:J,rx:L,ry:U,mx:V,my:R,bg:`${Math.round(_[0]*255)},${Math.round(_[1]*255)},${Math.round(_[2]*255)}`,font:$.fontFamily??E.DEFAULT_FONT,text:$.textColor??(q.isDark?"#c0c0c0":"#333333"),grid:$.gridColor??(q.isDark?"rgba(255,255,255,0.06)":"rgba(0,0,0,0.06)")}},z0={name:"labels",beforeDraw($,q){let{w:Q,h:B,m:J,rx:K,ry:j,mx:F,my:G,grid:L}=k0(q);$.strokeStyle=L,$.lineWidth=1,$.beginPath(),j0(G,G+j,7).forEach((U)=>{let V=B*(1-(U-G)/j);if(V>5&&V<B-J.bottom-5)$.moveTo(J.left,V),$.lineTo(Q,V)}),j0(F,F+K,8).forEach((U)=>{let V=Q*((U-F)/K);if(V>J.left&&V<Q)$.moveTo(V,0),$.lineTo(V,B-J.bottom)}),$.stroke()},afterDraw($,q){let{w:Q,h:B,m:J,rx:K,ry:j,mx:F,my:G,bg:L,font:U,text:V}=k0(q),{formatX:R=String,formatY:_=String,labelSize:k=E.DEFAULT_LABEL_SIZE}=q.config,H=(P,I,f,Y,o)=>{let O=P==="left"?$.createLinearGradient(I,0,I+Y,0):$.createLinearGradient(0,f,0,f+o),i=P==="left"?[1,0.7,0.2,0.05,0]:[0,0.05,0.2,0.7,1];[0,0.35,0.55,0.7,1].forEach((n,m)=>O.addColorStop(n,`rgba(${L},${i[m]})`)),$.fillStyle=O,$.fillRect(I,f,Y,o)};H("left",0,0,J.left+20,B),H("bottom",0,B-J.bottom-20,Q,J.bottom+20),$.font=`${k}px ${U}`,$.fillStyle=V,$.textAlign="right",$.textBaseline="middle",j0(G,G+j,7).forEach((P)=>{let I=B*(1-(P-G)/j);if(I>5&&I<B-J.bottom-5)$.fillText(_(P),J.left-5,I)}),$.textAlign="right",$.textBaseline="top",j0(F,F+K,8).forEach((P)=>{let I=Q*((P-F)/K);if(I<J.left-10||I>Q+30)return;$.save(),$.translate(I,B-J.bottom+5),$.rotate(-Math.PI/14),$.fillText(R(P),0,0),$.restore()})}};function W0($={}){let q=$.momentumDecay??0.91,Q=new WeakMap;return{name:"zoom",install(B,J){let K=J.style.touchAction,j=J.style.userSelect,F=J.style.webkitUserSelect;J.style.touchAction="pan-x pan-y",J.style.userSelect="none",J.style.webkitUserSelect="none";let G=E.getInstance(),L=new AbortController,U={lastX:0,lastY:0,velX:0,velY:0,abort:L,originalTouchAction:K,originalUserSelect:j,originalWebkitUserSelect:F,el:J};Q.set(B,U);let V=[],R=0,_=0,k=1,H=1,P=0.5,I=0.5,f=null,Y=!1,o=500,O=()=>{if(G.sendViewTransform(B),G.drawChart(B),G.syncViews)G.syncAllViews(B)},i=()=>{if(B.momentum)cancelAnimationFrame(B.momentum);let A=()=>{if(U.velX*=q,U.velY*=q,Math.abs(U.velX)>0.00005||Math.abs(U.velY)>0.00005){if(B.zoomMode!=="none"&&(B.zoomMode==="both"||B.zoomMode==="x-only"))B.view.panX-=U.velX/B.view.zoomX;if(B.zoomMode!=="none"&&(B.zoomMode==="both"||B.zoomMode==="y-only"))B.view.panY+=U.velY/B.view.zoomY;O(),B.momentum=requestAnimationFrame(A)}else B.momentum=null};B.momentum=requestAnimationFrame(A)},n=(A)=>{if(B.dragging&&V.length===0)B.dragging=!1};J.addEventListener("pointerdown",(A)=>{if(B.momentum)cancelAnimationFrame(B.momentum),B.momentum=null;if(V.push(A),J.setPointerCapture(A.pointerId),V.length===1){if(B.dragging=!0,U.lastX=A.clientX,U.lastY=A.clientY,U.velX=U.velY=0,R=performance.now(),Y=!1,A.pointerType==="touch")f=window.setTimeout(()=>{Y=!0,B.dragging=!1},o)}else if(V.length===2){if(f)clearTimeout(f),f=null;if(Y=!1,A.pointerType==="touch")A.preventDefault();let S=J.getBoundingClientRect(),N=V[1].clientX-V[0].clientX,z=V[1].clientY-V[0].clientY;_=Math.hypot(N,z),k=B.view.zoomX,H=B.view.zoomY,P=((V[0].clientX+V[1].clientX)/2-S.left)/S.width,I=1-((V[0].clientY+V[1].clientY)/2-S.top)/S.height}},{passive:!1,signal:L.signal}),J.addEventListener("pointermove",(A)=>{let S=V.findIndex((N)=>N.pointerId===A.pointerId);if(S>=0)V[S]=A;if(V.length===1&&B.dragging){let N=J.getBoundingClientRect(),z=(A.clientX-U.lastX)/N.width,D=(A.clientY-U.lastY)/N.height,W=0.005;if(f&&(Math.abs(z)>0.005||Math.abs(D)>0.005))clearTimeout(f),f=null;if(Y){U.lastX=A.clientX,U.lastY=A.clientY;return}if(A.pointerType==="touch")A.preventDefault();let w=performance.now();if(w-R<100)U.velX=U.velX*0.5+z*0.5,U.velY=U.velY*0.5+D*0.5;if(R=w,B.zoomMode!=="none"&&(B.zoomMode==="both"||B.zoomMode==="x-only"))B.view.panX-=z/B.view.zoomX;if(B.zoomMode!=="none"&&(B.zoomMode==="both"||B.zoomMode==="y-only"))B.view.panY+=D/B.view.zoomY;U.lastX=A.clientX,U.lastY=A.clientY,O()}else if(V.length===2){if(A.pointerType==="touch")A.preventDefault();let N=V[1].clientX-V[0].clientX,z=V[1].clientY-V[0].clientY,W=Math.hypot(N,z)/_;if(B.zoomMode!=="none"&&(B.zoomMode==="both"||B.zoomMode==="x-only")){let w=Math.max(E.MIN_ZOOM,Math.min(E.MAX_ZOOM,k*W)),X=B.view.panX+P/k;B.view.zoomX=w,B.view.panX=X-P/w}if(B.zoomMode!=="none"&&(B.zoomMode==="both"||B.zoomMode==="y-only")){let w=Math.max(E.MIN_ZOOM,Math.min(E.MAX_ZOOM,H*W)),X=B.view.panY+I/H;B.view.zoomY=w,B.view.panY=X-I/w}O()}},{passive:!1,signal:L.signal});let m=(A)=>{if(V=V.filter((S)=>S.pointerId!==A.pointerId),J.releasePointerCapture(A.pointerId),f)clearTimeout(f),f=null;if(V.length===0){if(Y=!1,B.dragging){if(B.dragging=!1,!Y&&(Math.abs(U.velX)>0.001||Math.abs(U.velY)>0.001))i()}}};J.addEventListener("pointerup",m,{signal:L.signal}),J.addEventListener("pointercancel",m,{signal:L.signal}),J.addEventListener("pointerleave",n,{signal:L.signal});let M=0;J.addEventListener("pointerup",(A)=>{if(V.length===1&&A.pointerType==="touch"){let S=Date.now();if(S-M<300)G.resetView(B.id),M=0;else M=S}else if(A.pointerType!=="touch"){let S=Date.now();if(S-M<300)G.resetView(B.id),M=0;else M=S}},{signal:L.signal}),J.addEventListener("wheel",(A)=>{if(A.preventDefault(),B.momentum)cancelAnimationFrame(B.momentum),B.momentum=null;let S=J.getBoundingClientRect(),N=A.clientX-S.left,z=A.clientY-S.top,D=N/S.width,W=1-z/S.height,w=1-A.deltaY*0.002,X=E.MARGIN,h=N<X.left,s=z>S.height-X.bottom,y,x;if(h)y=!1,x=!0;else if(s)y=!0,x=!1;else y=B.zoomMode==="both"||B.zoomMode==="x-only",x=B.zoomMode==="both"||B.zoomMode==="y-only";if(y){let C=B.view.panX+D/B.view.zoomX;B.view.zoomX=Math.max(E.MIN_ZOOM,Math.min(E.MAX_ZOOM,B.view.zoomX*w)),B.view.panX=C-D/B.view.zoomX}if(x){let C=B.view.panY+W/B.view.zoomY;B.view.zoomY=Math.max(E.MIN_ZOOM,Math.min(E.MAX_ZOOM,B.view.zoomY*w)),B.view.panY=C-W/B.view.zoomY}if(y||x)O()},{passive:!1,signal:L.signal})},uninstall(B){let J=Q.get(B);if(J){if(B.momentum)cancelAnimationFrame(B.momentum),B.momentum=null;J.el.style.touchAction=J.originalTouchAction,J.el.style.userSelect=J.originalUserSelect,J.el.style.webkitUserSelect=J.originalWebkitUserSelect,J.abort.abort(),Q.delete(B)}}}}var K0=new WeakMap,d0=($,q,Q,B,J,K,j,F)=>{$.beginPath(),$.roundRect(q,Q,B,J,K),$.fillStyle=j,$.fill(),$.strokeStyle=F,$.lineWidth=1.5,$.stroke()},I0={name:"hover",install($,q){let Q=E.getInstance(),B=new AbortController,J={hoverResult:null,pillX:0,pillY:0,pillTargetX:0,pillTargetY:0,pillAnimRef:null,abort:B};K0.set($,J);let K=(F)=>{if($.config.onHover)$.config.onHover(F);if(!($.config.showTooltip??!1))return;if(J.hoverResult=F,Q.drawChart($),F&&!J.pillAnimRef){let G=performance.now(),L=(U)=>{if(!J.hoverResult)return J.pillAnimRef=null;let V=1-Math.pow(0.5,(U-G)/($.config.pillDecayMs??60));G=U,J.pillX+=(J.pillTargetX-J.pillX)*V,J.pillY+=(J.pillTargetY-J.pillY)*V,Q.drawChart($),J.pillAnimRef=requestAnimationFrame(L)};J.pillAnimRef=requestAnimationFrame(L)}},j=(F,G)=>{if($.dragging)return;let L=q.getBoundingClientRect();K($.findNearestPoint(F-L.left,G-L.top,L.width,L.height))};q.addEventListener("mousemove",(F)=>j(F.clientX,F.clientY),{signal:B.signal}),q.addEventListener("touchmove",(F)=>{if(F.touches.length===1)j(F.touches[0].clientX,F.touches[0].clientY)},{signal:B.signal,passive:!0}),["mouseleave","pointerdown","touchend","touchcancel"].forEach((F)=>q.addEventListener(F,()=>K(null),{signal:B.signal}))},afterDraw($,q){let Q=K0.get(q);if(!Q?.hoverResult||!q.config.showTooltip)return;let{hoverResult:B}=Q,J=q.width,K=q.height,j=E.MARGIN,F=E.getInstance().isDark,{formatX:G=String,formatY:L=String,fontFamily:U=E.DEFAULT_FONT}=q.config,V=(q.bounds.maxX-q.bounds.minX)/q.view.zoomX,R=(q.bounds.maxY-q.bounds.minY)/q.view.zoomY,_=(B.x-(q.bounds.minX+q.view.panX*(q.bounds.maxX-q.bounds.minX)))/V*J,k=K*(1-(B.y-(q.bounds.minY+q.view.panY*(q.bounds.maxY-q.bounds.minY)))/R),H=q.series[B.seriesIndex]||q.series[0],P=`${Math.round(H.color.r*255)},${Math.round(H.color.g*255)},${Math.round(H.color.b*255)}`,I=`rgb(${P})`,f=F?`oklch(from ${I} calc(l + 0.1) c h)`:I;$.save(),$.setLineDash([4,3]),$.strokeStyle=`rgba(${P},0.4)`,$.stroke(new Path2D(`M${_} 0V${K-j.bottom}M${j.left} ${k}H${J}`)),$.restore(),$.beginPath(),$.arc(_,k,4.5,0,Math.PI*2),$.fillStyle=I,$.fill(),$.strokeStyle=F?"rgba(0,0,0,0.6)":"rgba(255,255,255,0.9)",$.stroke();let Y=q.series.map((N)=>{let z=0,D=N.rawX.length-1;while(z<=D){let W=z+D>>1;if(Math.abs(N.rawX[W]-B.x)<0.0001)return{label:N.label,val:L(N.rawY[W]),rawVal:N.rawY[W],col:`rgb(${Math.round(N.color.r*255)},${Math.round(N.color.g*255)},${Math.round(N.color.b*255)})`};N.rawX[W]<B.x?z=W+1:D=W-1}return null}).filter(Boolean);Y.sort((N,z)=>Math.abs(z.rawVal)-Math.abs(N.rawVal));let o=Y.length,O=Y.slice(0,5),i=o-O.length;if(Q.pillTargetX=_,Q.pillTargetY=k,!Q.pillAnimRef)Q.pillX=_,Q.pillY=k;let n=(N,z,D,W)=>{$.font=`600 10px ${U}`;let w=$.measureText(D).width,X=w+12,h=18,s=W?N-X/2:N-X,y=W?z:z-h/2;$.save();let x=W?Math.atan((Q.pillTargetX-Q.pillX)/80)*0.2:Math.atan((Q.pillTargetY-Q.pillY)/80)*0.2;$.translate(N,z),$.rotate(x);let C=W?-X/2:-X,c=W?0:-h/2;$.beginPath(),$.roundRect(C,c,X,h,4),$.fillStyle=F?"rgba(0,0,0,0.75)":"rgba(255,255,255,0.75)",$.fill(),$.fillStyle=`rgba(${P},0.2)`,$.fill(),$.strokeStyle=f,$.lineWidth=1.5,$.stroke(),$.fillStyle=f,$.textAlign="center",$.textBaseline="middle",$.fillText(D,C+X/2,c+h/2),$.restore()};n(Math.max(j.left,Math.min(J-j.right,Q.pillX)),K-j.bottom+4,G(B.x),!0),n(Math.max(j.left,j.left),Math.max(9,Math.min(K-j.bottom-9,Q.pillY)),L(B.y),!1);let m=Math.max(...O.map((N)=>$.measureText(N.label+N.val).width))+40,M=30+O.length*18+(i>0?18:0),A=B.screenX+14,S=B.screenY-M-6;if(A+m>J)A=B.screenX-m-14;if(S=Math.max(4,Math.min(K-M-4,B.screenY-M-6)),d0($,A,S,m,M,6,F?"rgba(28,28,30,0.95)":"rgba(255,255,255,0.96)","rgba(0,0,0,0.08)"),$.textAlign="left",$.textBaseline="middle",$.fillStyle=F?"#888":"#999",$.fillText(G(B.x),A+10,S+15),O.forEach((N,z)=>{let D=S+35+z*18;$.fillStyle=N.col,$.beginPath(),$.roundRect(A+10,D-4,8,8,2),$.fill(),$.fillStyle=F?"#eee":"#1a1a1a",$.fillText(`${N.label}: ${N.val}`,A+24,D)}),i>0){let N=S+35+O.length*18;$.fillStyle=F?"#666":"#aaa",$.fillText(`+${i} more`,A+10,N)}},uninstall($){let q=K0.get($);if(q?.pillAnimRef)cancelAnimationFrame(q.pillAnimRef);q?.abort.abort(),K0.delete($)}};Q0(z0);Q0(W0());Q0(I0);var $0=16,P0=320,D0=240,N0=480,R0=320,p0=0.1,l0=4,o0=0.0015,U0=[{name:"US GDP (1960–2024)",category:"GDP & Growth",url:"https://api.worldbank.org/v2/country/us/indicator/NY.GDP.MKTP.CD?date=1960:2024&format=json&per_page=100",transform:`const items = data[1].filter(d => d.value != null).reverse();
return { x: items.map(d => parseInt(d.date)), y: items.map(d => d.value) };`,type:"line"},{name:"China GDP (1960–2024)",category:"GDP & Growth",url:"https://api.worldbank.org/v2/country/cn/indicator/NY.GDP.MKTP.CD?date=1960:2024&format=json&per_page=100",transform:`const items = data[1].filter(d => d.value != null).reverse();
return { x: items.map(d => parseInt(d.date)), y: items.map(d => d.value) };`,type:"line"},{name:"India GDP (1960–2024)",category:"GDP & Growth",url:"https://api.worldbank.org/v2/country/in/indicator/NY.GDP.MKTP.CD?date=1960:2024&format=json&per_page=100",transform:`const items = data[1].filter(d => d.value != null).reverse();
return { x: items.map(d => parseInt(d.date)), y: items.map(d => d.value) };`,type:"line"},{name:"Japan GDP (1960–2024)",category:"GDP & Growth",url:"https://api.worldbank.org/v2/country/jp/indicator/NY.GDP.MKTP.CD?date=1960:2024&format=json&per_page=100",transform:`const items = data[1].filter(d => d.value != null).reverse();
return { x: items.map(d => parseInt(d.date)), y: items.map(d => d.value) };`,type:"line"},{name:"Germany GDP (1960–2024)",category:"GDP & Growth",url:"https://api.worldbank.org/v2/country/de/indicator/NY.GDP.MKTP.CD?date=1960:2024&format=json&per_page=100",transform:`const items = data[1].filter(d => d.value != null).reverse();
return { x: items.map(d => parseInt(d.date)), y: items.map(d => d.value) };`,type:"line"},{name:"Brazil GDP (1960–2024)",category:"GDP & Growth",url:"https://api.worldbank.org/v2/country/br/indicator/NY.GDP.MKTP.CD?date=1960:2024&format=json&per_page=100",transform:`const items = data[1].filter(d => d.value != null).reverse();
return { x: items.map(d => parseInt(d.date)), y: items.map(d => d.value) };`,type:"line"},{name:"Nigeria GDP (1960–2024)",category:"GDP & Growth",url:"https://api.worldbank.org/v2/country/ng/indicator/NY.GDP.MKTP.CD?date=1960:2024&format=json&per_page=100",transform:`const items = data[1].filter(d => d.value != null).reverse();
return { x: items.map(d => parseInt(d.date)), y: items.map(d => d.value) };`,type:"line"},{name:"US GDP per Capita",category:"GDP & Growth",url:"https://api.worldbank.org/v2/country/us/indicator/NY.GDP.PCAP.CD?date=1960:2024&format=json&per_page=100",transform:`const items = data[1].filter(d => d.value != null).reverse();
return { x: items.map(d => parseInt(d.date)), y: items.map(d => d.value) };`,type:"line"},{name:"China GDP Growth % (annual)",category:"GDP & Growth",url:"https://api.worldbank.org/v2/country/cn/indicator/NY.GDP.MKTP.KD.ZG?date=1960:2024&format=json&per_page=100",transform:`const items = data[1].filter(d => d.value != null).reverse();
return { x: items.map(d => parseInt(d.date)), y: items.map(d => d.value) };`,type:"bar"},{name:"India GDP Growth % (annual)",category:"GDP & Growth",url:"https://api.worldbank.org/v2/country/in/indicator/NY.GDP.MKTP.KD.ZG?date=1960:2024&format=json&per_page=100",transform:`const items = data[1].filter(d => d.value != null).reverse();
return { x: items.map(d => parseInt(d.date)), y: items.map(d => d.value) };`,type:"bar"},{name:"Bitcoin 1yr",category:"Crypto",url:"https://api.coingecko.com/api/v3/coins/bitcoin/market_chart?vs_currency=usd&days=365",transform:`const p = data.prices;
return { x: p.map((_, i) => i), y: p.map(d => d[1]) };`,type:"line"},{name:"Ethereum 1yr",category:"Crypto",url:"https://api.coingecko.com/api/v3/coins/ethereum/market_chart?vs_currency=usd&days=365",transform:`const p = data.prices;
return { x: p.map((_, i) => i), y: p.map(d => d[1]) };`,type:"line"},{name:"Solana 90d",category:"Crypto",url:"https://api.coingecko.com/api/v3/coins/solana/market_chart?vs_currency=usd&days=90",transform:`const p = data.prices;
return { x: p.map((_, i) => i), y: p.map(d => d[1]) };`,type:"line"},{name:"Dogecoin 90d",category:"Crypto",url:"https://api.coingecko.com/api/v3/coins/dogecoin/market_chart?vs_currency=usd&days=90",transform:`const p = data.prices;
return { x: p.map((_, i) => i), y: p.map(d => d[1]) };`,type:"line"},{name:"Cardano 90d",category:"Crypto",url:"https://api.coingecko.com/api/v3/coins/cardano/market_chart?vs_currency=usd&days=90",transform:`const p = data.prices;
return { x: p.map((_, i) => i), y: p.map(d => d[1]) };`,type:"line"},{name:"XRP 90d",category:"Crypto",url:"https://api.coingecko.com/api/v3/coins/ripple/market_chart?vs_currency=usd&days=90",transform:`const p = data.prices;
return { x: p.map((_, i) => i), y: p.map(d => d[1]) };`,type:"line"},{name:"Polkadot 90d",category:"Crypto",url:"https://api.coingecko.com/api/v3/coins/polkadot/market_chart?vs_currency=usd&days=90",transform:`const p = data.prices;
return { x: p.map((_, i) => i), y: p.map(d => d[1]) };`,type:"line"},{name:"Chainlink 90d",category:"Crypto",url:"https://api.coingecko.com/api/v3/coins/chainlink/market_chart?vs_currency=usd&days=90",transform:`const p = data.prices;
return { x: p.map((_, i) => i), y: p.map(d => d[1]) };`,type:"line"},{name:"BTC Volume 30d",category:"Crypto",url:"https://api.coingecko.com/api/v3/coins/bitcoin/market_chart?vs_currency=usd&days=30",transform:`const v = data.total_volumes;
return { x: v.map((_, i) => i), y: v.map(d => d[1]) };`,type:"bar"},{name:"ETH Volume 30d",category:"Crypto",url:"https://api.coingecko.com/api/v3/coins/ethereum/market_chart?vs_currency=usd&days=30",transform:`const v = data.total_volumes;
return { x: v.map((_, i) => i), y: v.map(d => d[1]) };`,type:"bar"},{name:"BTC Market Cap 1yr",category:"Crypto",url:"https://api.coingecko.com/api/v3/coins/bitcoin/market_chart?vs_currency=usd&days=365",transform:`const m = data.market_caps;
return { x: m.map((_, i) => i), y: m.map(d => d[1]) };`,type:"line"},{name:"World Population",category:"Population & Society",url:"https://api.worldbank.org/v2/country/wld/indicator/SP.POP.TOTL?date=1960:2024&format=json&per_page=100",transform:`const items = data[1].filter(d => d.value != null).reverse();
return { x: items.map(d => parseInt(d.date)), y: items.map(d => d.value) };`,type:"line"},{name:"India Population",category:"Population & Society",url:"https://api.worldbank.org/v2/country/in/indicator/SP.POP.TOTL?date=1960:2024&format=json&per_page=100",transform:`const items = data[1].filter(d => d.value != null).reverse();
return { x: items.map(d => parseInt(d.date)), y: items.map(d => d.value) };`,type:"line"},{name:"Japan Population (decline)",category:"Population & Society",url:"https://api.worldbank.org/v2/country/jp/indicator/SP.POP.TOTL?date=1960:2024&format=json&per_page=100",transform:`const items = data[1].filter(d => d.value != null).reverse();
return { x: items.map(d => parseInt(d.date)), y: items.map(d => d.value) };`,type:"line"},{name:"Nigeria Population (boom)",category:"Population & Society",url:"https://api.worldbank.org/v2/country/ng/indicator/SP.POP.TOTL?date=1960:2024&format=json&per_page=100",transform:`const items = data[1].filter(d => d.value != null).reverse();
return { x: items.map(d => parseInt(d.date)), y: items.map(d => d.value) };`,type:"line"},{name:"US Life Expectancy",category:"Population & Society",url:"https://api.worldbank.org/v2/country/us/indicator/SP.DYN.LE00.IN?date=1960:2024&format=json&per_page=100",transform:`const items = data[1].filter(d => d.value != null).reverse();
return { x: items.map(d => parseInt(d.date)), y: items.map(d => d.value) };`,type:"line"},{name:"Japan Life Expectancy",category:"Population & Society",url:"https://api.worldbank.org/v2/country/jp/indicator/SP.DYN.LE00.IN?date=1960:2024&format=json&per_page=100",transform:`const items = data[1].filter(d => d.value != null).reverse();
return { x: items.map(d => parseInt(d.date)), y: items.map(d => d.value) };`,type:"line"},{name:"Global Fertility Rate",category:"Population & Society",url:"https://api.worldbank.org/v2/country/wld/indicator/SP.DYN.TFRT.IN?date=1960:2024&format=json&per_page=100",transform:`const items = data[1].filter(d => d.value != null).reverse();
return { x: items.map(d => parseInt(d.date)), y: items.map(d => d.value) };`,type:"line"},{name:"Global Infant Mortality",category:"Population & Society",url:"https://api.worldbank.org/v2/country/wld/indicator/SP.DYN.IMRT.IN?date=1960:2024&format=json&per_page=100",transform:`const items = data[1].filter(d => d.value != null).reverse();
return { x: items.map(d => parseInt(d.date)), y: items.map(d => d.value) };`,type:"line"},{name:"US Unemployment %",category:"Population & Society",url:"https://api.worldbank.org/v2/country/us/indicator/SL.UEM.TOTL.NE.ZS?date=1991:2024&format=json&per_page=100",transform:`const items = data[1].filter(d => d.value != null).reverse();
return { x: items.map(d => parseInt(d.date)), y: items.map(d => d.value) };`,type:"line"},{name:"South Africa Unemployment %",category:"Population & Society",url:"https://api.worldbank.org/v2/country/za/indicator/SL.UEM.TOTL.NE.ZS?date=1991:2024&format=json&per_page=100",transform:`const items = data[1].filter(d => d.value != null).reverse();
return { x: items.map(d => parseInt(d.date)), y: items.map(d => d.value) };`,type:"line"},{name:"Global CO2 (kt)",category:"Energy & Emissions",url:"https://api.worldbank.org/v2/country/wld/indicator/EN.ATM.CO2E.KT?date=1960:2022&format=json&per_page=100",transform:`const items = data[1].filter(d => d.value != null).reverse();
return { x: items.map(d => parseInt(d.date)), y: items.map(d => d.value) };`,type:"line"},{name:"US CO2 per Capita",category:"Energy & Emissions",url:"https://api.worldbank.org/v2/country/us/indicator/EN.ATM.CO2E.PC?date=1960:2022&format=json&per_page=100",transform:`const items = data[1].filter(d => d.value != null).reverse();
return { x: items.map(d => parseInt(d.date)), y: items.map(d => d.value) };`,type:"line"},{name:"China CO2 per Capita",category:"Energy & Emissions",url:"https://api.worldbank.org/v2/country/cn/indicator/EN.ATM.CO2E.PC?date=1960:2022&format=json&per_page=100",transform:`const items = data[1].filter(d => d.value != null).reverse();
return { x: items.map(d => parseInt(d.date)), y: items.map(d => d.value) };`,type:"line"},{name:"Global Renewable Energy %",category:"Energy & Emissions",url:"https://api.worldbank.org/v2/country/wld/indicator/EG.FEC.RNEW.ZS?date=1990:2022&format=json&per_page=100",transform:`const items = data[1].filter(d => d.value != null).reverse();
return { x: items.map(d => parseInt(d.date)), y: items.map(d => d.value) };`,type:"line"},{name:"Global Electricity Access %",category:"Energy & Emissions",url:"https://api.worldbank.org/v2/country/wld/indicator/EG.ELC.ACCS.ZS?date=1990:2024&format=json&per_page=100",transform:`const items = data[1].filter(d => d.value != null).reverse();
return { x: items.map(d => parseInt(d.date)), y: items.map(d => d.value) };`,type:"line"},{name:"India Electricity Access %",category:"Energy & Emissions",url:"https://api.worldbank.org/v2/country/in/indicator/EG.ELC.ACCS.ZS?date=1990:2024&format=json&per_page=100",transform:`const items = data[1].filter(d => d.value != null).reverse();
return { x: items.map(d => parseInt(d.date)), y: items.map(d => d.value) };`,type:"line"},{name:"Brazil Forest Area %",category:"Energy & Emissions",url:"https://api.worldbank.org/v2/country/br/indicator/AG.LND.FRST.ZS?date=1990:2022&format=json&per_page=100",transform:`const items = data[1].filter(d => d.value != null).reverse();
return { x: items.map(d => parseInt(d.date)), y: items.map(d => d.value) };`,type:"line"},{name:"Global Internet Users %",category:"Technology & Trade",url:"https://api.worldbank.org/v2/country/wld/indicator/IT.NET.USER.ZS?date=1990:2024&format=json&per_page=100",transform:`const items = data[1].filter(d => d.value != null).reverse();
return { x: items.map(d => parseInt(d.date)), y: items.map(d => d.value) };`,type:"line"},{name:"China Mobile Subscriptions / 100",category:"Technology & Trade",url:"https://api.worldbank.org/v2/country/cn/indicator/IT.CEL.SETS.P2?date=1960:2024&format=json&per_page=100",transform:`const items = data[1].filter(d => d.value != null).reverse();
return { x: items.map(d => parseInt(d.date)), y: items.map(d => d.value) };`,type:"line"},{name:"India Internet Users %",category:"Technology & Trade",url:"https://api.worldbank.org/v2/country/in/indicator/IT.NET.USER.ZS?date=1990:2024&format=json&per_page=100",transform:`const items = data[1].filter(d => d.value != null).reverse();
return { x: items.map(d => parseInt(d.date)), y: items.map(d => d.value) };`,type:"line"},{name:"US R&D Spending % GDP",category:"Technology & Trade",url:"https://api.worldbank.org/v2/country/us/indicator/GB.XPD.RSDV.GD.ZS?date=1996:2024&format=json&per_page=100",transform:`const items = data[1].filter(d => d.value != null).reverse();
return { x: items.map(d => parseInt(d.date)), y: items.map(d => d.value) };`,type:"line"},{name:"South Korea R&D % GDP",category:"Technology & Trade",url:"https://api.worldbank.org/v2/country/kr/indicator/GB.XPD.RSDV.GD.ZS?date=1996:2024&format=json&per_page=100",transform:`const items = data[1].filter(d => d.value != null).reverse();
return { x: items.map(d => parseInt(d.date)), y: items.map(d => d.value) };`,type:"line"},{name:"US Military Spending % GDP",category:"Technology & Trade",url:"https://api.worldbank.org/v2/country/us/indicator/MS.MIL.XPND.GD.ZS?date=1960:2024&format=json&per_page=100",transform:`const items = data[1].filter(d => d.value != null).reverse();
return { x: items.map(d => parseInt(d.date)), y: items.map(d => d.value) };`,type:"line"},{name:"Global Trade % of GDP",category:"Technology & Trade",url:"https://api.worldbank.org/v2/country/wld/indicator/NE.TRD.GNFS.ZS?date=1960:2024&format=json&per_page=100",transform:`const items = data[1].filter(d => d.value != null).reverse();
return { x: items.map(d => parseInt(d.date)), y: items.map(d => d.value) };`,type:"line"},{name:"US Inflation (CPI %)",category:"Technology & Trade",url:"https://api.worldbank.org/v2/country/us/indicator/FP.CPI.TOTL.ZG?date=1960:2024&format=json&per_page=100",transform:`const items = data[1].filter(d => d.value != null).reverse();
return { x: items.map(d => parseInt(d.date)), y: items.map(d => d.value) };`,type:"line"},{name:"Argentina Inflation (CPI %)",category:"Technology & Trade",url:"https://api.worldbank.org/v2/country/ar/indicator/FP.CPI.TOTL.ZG?date=1960:2024&format=json&per_page=100",transform:`const items = data[1].filter(d => d.value != null).reverse();
return { x: items.map(d => parseInt(d.date)), y: items.map(d => d.value) };`,type:"bar"},{name:"SF Bay Temp (10yr daily)",category:"Climate & Weather",url:"https://power.larc.nasa.gov/api/temporal/daily/point?parameters=T2M&community=SB&longitude=-122.4&latitude=37.8&start=20150101&end=20241231&format=JSON",transform:`const temps = data.properties.parameter.T2M;
const entries = Object.entries(temps).filter(([k, v]) => v !== -999);
return { x: entries.map((_, i) => i), y: entries.map(([k, v]) => v) };`,type:"line"},{name:"Tokyo Temp (10yr daily)",category:"Climate & Weather",url:"https://power.larc.nasa.gov/api/temporal/daily/point?parameters=T2M&community=SB&longitude=139.7&latitude=35.7&start=20150101&end=20241231&format=JSON",transform:`const temps = data.properties.parameter.T2M;
const entries = Object.entries(temps).filter(([k, v]) => v !== -999);
return { x: entries.map((_, i) => i), y: entries.map(([k, v]) => v) };`,type:"line"},{name:"Death Valley Temp (10yr)",category:"Climate & Weather",url:"https://power.larc.nasa.gov/api/temporal/daily/point?parameters=T2M&community=SB&longitude=-116.8&latitude=36.5&start=20150101&end=20241231&format=JSON",transform:`const temps = data.properties.parameter.T2M;
const entries = Object.entries(temps).filter(([k, v]) => v !== -999);
return { x: entries.map((_, i) => i), y: entries.map(([k, v]) => v) };`,type:"line"},{name:"Antarctica Temp (10yr)",category:"Climate & Weather",url:"https://power.larc.nasa.gov/api/temporal/daily/point?parameters=T2M&community=SB&longitude=0&latitude=-85&start=20150101&end=20241231&format=JSON",transform:`const temps = data.properties.parameter.T2M;
const entries = Object.entries(temps).filter(([k, v]) => v !== -999);
return { x: entries.map((_, i) => i), y: entries.map(([k, v]) => v) };`,type:"line"},{name:"Sahara Solar Radiation (10yr)",category:"Climate & Weather",url:"https://power.larc.nasa.gov/api/temporal/daily/point?parameters=ALLSKY_SFC_SW_DWN&community=SB&longitude=3&latitude=23.5&start=20150101&end=20241231&format=JSON",transform:`const param = data.properties.parameter.ALLSKY_SFC_SW_DWN;
const entries = Object.entries(param).filter(([k, v]) => v !== -999);
return { x: entries.map((_, i) => i), y: entries.map(([k, v]) => v) };`,type:"line"},{name:"London Solar Radiation (10yr)",category:"Climate & Weather",url:"https://power.larc.nasa.gov/api/temporal/daily/point?parameters=ALLSKY_SFC_SW_DWN&community=SB&longitude=-0.12&latitude=51.5&start=20150101&end=20241231&format=JSON",transform:`const param = data.properties.parameter.ALLSKY_SFC_SW_DWN;
const entries = Object.entries(param).filter(([k, v]) => v !== -999);
return { x: entries.map((_, i) => i), y: entries.map(([k, v]) => v) };`,type:"line"},{name:"Reykjavik Wind Speed (10yr)",category:"Climate & Weather",url:"https://power.larc.nasa.gov/api/temporal/daily/point?parameters=WS10M&community=SB&longitude=-21.9&latitude=64.1&start=20150101&end=20241231&format=JSON",transform:`const param = data.properties.parameter.WS10M;
const entries = Object.entries(param).filter(([k, v]) => v !== -999);
return { x: entries.map((_, i) => i), y: entries.map(([k, v]) => v) };`,type:"line"},{name:"Mumbai Humidity (10yr)",category:"Climate & Weather",url:"https://power.larc.nasa.gov/api/temporal/daily/point?parameters=RH2M&community=SB&longitude=72.9&latitude=19.1&start=20150101&end=20241231&format=JSON",transform:`const param = data.properties.parameter.RH2M;
const entries = Object.entries(param).filter(([k, v]) => v !== -999);
return { x: entries.map((_, i) => i), y: entries.map(([k, v]) => v) };`,type:"line"},{name:"Denver Precipitation (10yr)",category:"Climate & Weather",url:"https://power.larc.nasa.gov/api/temporal/daily/point?parameters=PRECTOTCORR&community=SB&longitude=-104.9&latitude=39.7&start=20150101&end=20241231&format=JSON",transform:`const param = data.properties.parameter.PRECTOTCORR;
const entries = Object.entries(param).filter(([k, v]) => v !== -999);
return { x: entries.map((_, i) => i), y: entries.map(([k, v]) => v) };`,type:"bar"},{name:"Earthquakes (30d scatter)",category:"Seismology",url:"https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_month.geojson",transform:`const f = data.features.filter(f => f.properties.mag != null);
f.sort((a, b) => a.properties.time - b.properties.time);
const t0 = f[0]?.properties.time || 0;
return {
  x: f.map(f => (f.properties.time - t0) / 3600000),
  y: f.map(f => f.properties.mag)
};`,type:"scatter"},{name:"Earthquake Depth vs Mag",category:"Seismology",url:"https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_month.geojson",transform:`const f = data.features.filter(f => f.properties.mag != null && f.geometry.coordinates[2] > 0);
return {
  x: f.map(f => f.geometry.coordinates[2]),
  y: f.map(f => f.properties.mag)
};`,type:"scatter"},{name:"Quake Lat vs Lng (plate map)",category:"Seismology",url:"https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_month.geojson",transform:`const f = data.features.filter(f => f.properties.mag != null);
return {
  x: f.map(f => f.geometry.coordinates[0]),
  y: f.map(f => f.geometry.coordinates[1])
};`,type:"scatter"},{name:"Significant Quakes (30d)",category:"Seismology",url:"https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/significant_month.geojson",transform:`const f = data.features.filter(f => f.properties.mag != null);
f.sort((a, b) => a.properties.time - b.properties.time);
return {
  x: f.map((_, i) => i),
  y: f.map(f => f.properties.mag)
};`,type:"bar"},{name:"M4.5+ Quakes (30d)",category:"Seismology",url:"https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/4.5_month.geojson",transform:`const f = data.features.filter(f => f.properties.mag != null);
f.sort((a, b) => a.properties.time - b.properties.time);
const t0 = f[0]?.properties.time || 0;
return {
  x: f.map(f => (f.properties.time - t0) / 3600000),
  y: f.map(f => f.properties.mag)
};`,type:"scatter"},{name:"Random Walk (100k)",category:"Synthetic",url:"",transform:`const n = 100000;
const x = new Array(n), y = new Array(n);
let v = 0;
for (let i = 0; i < n; i++) { x[i] = i; v += (Math.random() - 0.498) * 2; y[i] = v; }
return { x, y };`,type:"line"},{name:"Random Walk (1M)",category:"Synthetic",url:"",transform:`const n = 1000000;
const x = new Array(n), y = new Array(n);
let v = 0;
for (let i = 0; i < n; i++) { x[i] = i; v += (Math.random() - 0.498) * 2; y[i] = v; }
return { x, y };`,type:"line"},{name:"Sine Waves (10k)",category:"Synthetic",url:"",transform:`const n = 10000;
const x = new Array(n), y = new Array(n);
for (let i = 0; i < n; i++) { x[i] = i; y[i] = Math.sin(i * 0.01) + Math.sin(i * 0.03) * 0.5; }
return { x, y };`,type:"line"},{name:"Noise Cloud (50k)",category:"Synthetic",url:"",transform:`const n = 50000;
const x = new Array(n), y = new Array(n);
for (let i = 0; i < n; i++) {
  const a = Math.random() * Math.PI * 2;
  const r = Math.sqrt(-2 * Math.log(Math.random()));
  x[i] = Math.cos(a) * r; y[i] = Math.sin(a) * r;
}
return { x, y };`,type:"scatter"},{name:"Deadmau5 (10M)",category:"Synthetic",url:"",transform:`const N = 10000000, x = new Array(N), y = new Array(N);
const rp = (cx, cy, r) => {
  const a = Math.random() * 6.2832, d = Math.sqrt(Math.random()) * r;
  return [cx + Math.cos(a) * d, cy + Math.sin(a) * d];
};
let i = 0;
while (i < N) {
  let p, s = Math.random();
  if (s < 0.5) {
    p = rp(0, 0, 5);
    const lx = p[0] + 1.7, ly = p[1] - 0.8, rx = p[0] - 1.7, ry = p[1] - 0.8;
    if (lx * lx + ly * ly < 1.44 || rx * rx + ry * ry < 1.44) continue;
    const sd = p[0] * p[0] + (p[1] + 1) * (p[1] + 1);
    if (p[1] < -1 && sd > 5.76 && sd < 9 && Math.abs(p[0]) < 2.8) continue;
  } else if (s < 0.75) { p = rp(-3.8, 5.8, 3); }
  else { p = rp(3.8, 5.8, 3); }
  x[i] = p[0]; y[i] = p[1]; i++;
}
return { x, y };`,type:"scatter"},{name:"Spiral Galaxy (5M)",category:"Synthetic",url:"",transform:`const N = 5000000, x = new Array(N), y = new Array(N);
for (let i = 0; i < N; i++) {
  const arm = (Math.random() * 4) | 0;
  const d = Math.sqrt(Math.random()) * 12;
  const a = d * 0.7 + arm * 1.5708 + (Math.random() - 0.5) * (0.4 + d * 0.04);
  x[i] = Math.cos(a) * d;
  y[i] = Math.sin(a) * d;
}
return { x, y };`,type:"scatter"},{name:"Heart (2M)",category:"Synthetic",url:"",transform:`const N = 2000000, x = new Array(N), y = new Array(N);
let i = 0;
while (i < N) {
  const px = (Math.random() - 0.5) * 36, py = (Math.random() - 0.5) * 34;
  const nx = px / 16, ny = (py - 3) / 16;
  const v = nx * nx + ny * ny - 1;
  if (v * v * v - nx * nx * ny * ny * ny <= 0) { x[i] = px; y[i] = py; i++; }
}
return { x, y };`,type:"scatter"},{name:"Lissajous (500k)",category:"Synthetic",url:"",transform:`const N = 500000, x = new Array(N), y = new Array(N);
for (let i = 0; i < N; i++) {
  const t = i * 0.0001 + Math.random() * 0.02;
  x[i] = Math.sin(3 * t + 0.5) + (Math.random() - 0.5) * 0.05;
  y[i] = Math.sin(5 * t) + (Math.random() - 0.5) * 0.05;
}
return { x, y };`,type:"scatter"}],v,d=[],T0=1,p=0,l=0,b=1,u,B0,e,Z=null,L0=null,q0=null,f0=0,Y0=0;function T($){return Math.round($/$0)*$0}function i0($,q){return $.x<q.x+q.w&&$.x+$.w>q.x&&$.y<q.y+q.h&&$.y+$.h>q.y}function g($,q){for(let Q of d){if(Q.id===q)continue;if(i0($,Q))return!0}return!1}function n0($,q){let Q=u.getBoundingClientRect();return{x:($-Q.left-p)/b,y:(q-Q.top-l)/b}}function h0($,q,Q){let B=(1-Math.abs(2*Q-1))*q,J=B*(1-Math.abs($/60%2-1)),K=Q-B/2,j=0,F=0,G=0;if($<60)j=B,F=J;else if($<120)j=J,F=B;else if($<180)F=B,G=J;else if($<240)F=J,G=B;else if($<300)j=J,G=B;else j=B,G=J;return{r:j+K,g:F+K,b:G+K}}function _0(){return h0(Math.random()*360,0.6+Math.random()*0.2,0.5+Math.random()*0.15)}function s0(){let q=new Array(1000),Q=new Array(1000),B=50;for(let J=0;J<1000;J++)q[J]=J,B+=(Math.random()-0.498)*3,Q[J]=B;return{x:q,y:Q}}function c0($){if(Math.abs($)>=1e6)return($/1e6).toFixed(1)+"M";if(Math.abs($)>=1000)return($/1000).toFixed(1)+"k";if(Math.abs($)>=100)return $.toFixed(0);if(Math.abs($)>=10)return $.toFixed(1);return $.toFixed(2)}function r0($){return Math.round($).toString()}function e0($){if($>=1e6)return($/1e6).toFixed(1)+"M";if($>=1000)return($/1000).toFixed(0)+"k";return $.toString()}var O0=document.createElement("canvas").getContext("2d");function t0($,q){return O0.font=q,O0.measureText($||" ").width}function A0(){B0.style.transform=`translate(${p}px, ${l}px) scale(${b})`;let $=24*b;u.style.backgroundSize=`${$}px ${$}px`,u.style.backgroundPosition=`${p%$}px ${l%$}px`}var M0=0;function a0(){let $=document.getElementById("zoom-indicator");$.textContent=Math.round(b*100)+"%",$.classList.add("visible"),clearTimeout(M0),M0=window.setTimeout(()=>$.classList.remove("visible"),800)}function $5(){u=document.getElementById("viewport"),B0=document.getElementById("canvas"),e=document.getElementById("context-menu"),u.addEventListener("wheel",($)=>{$.preventDefault();let q=-$.deltaY*o0,Q=Math.min(l0,Math.max(p0,b*(1+q))),B=u.getBoundingClientRect(),J=$.clientX-B.left,K=$.clientY-B.top;p=J-(J-p)/b*Q,l=K-(K-l)/b*Q,b=Q,A0(),a0()},{passive:!1}),u.addEventListener("mousedown",($)=>{if(G0(),B5(),$.button!==0)return;let q=$.target;if(q!==u&&q!==B0&&!q.classList.contains("vignette"))return;$.preventDefault(),Z={type:"pan",startMX:$.clientX,startMY:$.clientY,startX:0,startY:0,startW:0,startH:0,startPanX:p,startPanY:l},u.classList.add("grabbing")}),window.addEventListener("mousemove",q5),window.addEventListener("mouseup",J5),u.addEventListener("contextmenu",($)=>{$.preventDefault();let q=$.target;if(q!==u&&q!==B0&&!q.classList.contains("vignette"))return;let Q=n0($.clientX,$.clientY);f0=T(Q.x),Y0=T(Q.y),e.style.left=$.clientX+"px",e.style.top=$.clientY+"px",e.classList.add("open")}),e.querySelectorAll("button[data-type]").forEach(($)=>{$.addEventListener("click",()=>{let q=$.dataset.type;E0(q,f0,Y0),G0()})}),document.addEventListener("mousedown",($)=>{if(!$.target.closest(".context-menu"))G0()}),A0()}function G0(){e.classList.remove("open")}function B5(){document.getElementById("add-menu").classList.remove("open")}function q5($){if(!Z)return;$.preventDefault();let q=$.clientX-Z.startMX,Q=$.clientY-Z.startMY;if(Z.type==="pan"){p=Z.startPanX+q,l=Z.startPanY+Q,A0();return}if(Z.type==="drag"&&Z.chart){let B=Z.chart,J=T(Z.startX+q/b),K=T(Z.startY+Q/b),j={x:J,y:K,w:B.w,h:B.h};if(!g(j,B.id))B.x=J,B.y=K;else{let F=!g({x:J,y:B.y,w:B.w,h:B.h},B.id),G=!g({x:B.x,y:K,w:B.w,h:B.h},B.id);if(F)B.x=J;if(G)B.y=K}X0(B);return}if(Z.type==="resize"&&Z.chart){let{chart:B,handle:J}=Z,K=B.x,j=B.y,F=B.w,G=B.h,L=q/b,U=Q/b;if(J.includes("e"))F=T(Math.max(P0,Z.startW+L));if(J.includes("w")){let R=T(Math.max(P0,Z.startW-L));K=T(Z.startX+(Z.startW-R)),F=R}if(J.includes("s"))G=T(Math.max(D0,Z.startH+U));if(J.includes("n")){let R=T(Math.max(D0,Z.startH-U));j=T(Z.startY+(Z.startH-R)),G=R}if(!g({x:K,y:j,w:F,h:G},B.id))B.x=K,B.y=j,B.w=F,B.h=G;else{let R={x:K,y:B.y,w:F,h:B.h},_={x:B.x,y:j,w:B.w,h:G};if(!g(R,B.id))B.x=K,B.w=F;if(!g(_,B.id))B.y=j,B.h=G}X0(B),V5(B);return}}function J5($){if(!Z)return;if(Z.type==="pan")u.classList.remove("grabbing");if(Z.type==="drag"&&Z.chart)Z.chart.el.classList.remove("dragging");if(Z.type==="resize"&&Z.chart)Z.chart.el.classList.remove("resizing");Z=null}function Z0($,q){let Q=u.getBoundingClientRect(),B=T((-p+Q.width/2)/b-$/2),J=T((-l+Q.height/2)/b-q/2);if(!g({x:B,y:J,w:$,h:q}))return{x:B,y:J};for(let K=$0;K<4000;K+=$0)for(let j=-K;j<=K;j+=$0){if(!g({x:B+j,y:J-K,w:$,h:q}))return{x:B+j,y:J-K};if(!g({x:B+j,y:J+K,w:$,h:q}))return{x:B+j,y:J+K};if(!g({x:B-K,y:J+j,w:$,h:q}))return{x:B-K,y:J+j};if(!g({x:B+K,y:J+j,w:$,h:q}))return{x:B+K,y:J+j}}return{x:B,y:J}}function E0($,q,Q){let B="tile-"+T0++,J=T(N0),K=T(R0),j=T(q-J/2),F=T(Q-K/2);if(g({x:j,y:F,w:J,h:K})){let H=Z0(J,K);j=H.x,F=H.y}let G={id:B,chartId:"",name:"Chart "+(T0-1),x:j,y:F,w:J,h:K,type:$,el:null},L=K5(G);G.el=L,B0.appendChild(L),d.push(G);let U=L.querySelector(".tile-body"),V=document.getElementById("series-count"),R=Math.max(1,Math.min(100,parseInt(V?.value||"3"))),_=[];for(let H=0;H<R;H++){let P=s0(),I=_0();_.push({label:`Series ${String.fromCharCode(65+H)}`,color:I,x:P.x,y:P.y})}let k={type:$,container:U,series:_,formatX:r0,formatY:c0,zoomMode:"both",showTooltip:!0,bgColor:[0.055,0.055,0.086],textColor:"#8888a0",gridColor:"#262638"};try{G.chartId=v.create(k)}catch(H){console.error("Failed to create chart:",H),L.remove(),d.splice(d.indexOf(G),1);return}}function V0($){let q=T(N0),Q=T(R0),B=Z0(q,Q);E0($,B.x+q/2,B.y+Q/2)}function b0($){let q=d.findIndex((B)=>B.id===$);if(q<0)return;let Q=d[q];if(Q.chartId)v.destroy(Q.chartId);Q.el.remove(),d.splice(q,1)}function Q5(){for(let $ of[...d])b0($.id)}function j5($){let Q=()=>{let B=t0($.value,"600 13px -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif");$.style.width=Math.max(20,Math.ceil(B)+14)+"px"};return $.addEventListener("input",Q),$.addEventListener("blur",Q),Q(),Q}function K5($){let q=document.createElement("div");q.className="chart-tile",q.dataset.tileId=$.id,q.style.left=$.x+"px",q.style.top=$.y+"px",q.style.width=$.w+"px",q.style.height=$.h+"px";let Q=$.type.charAt(0).toUpperCase()+$.type.slice(1),B=$.type==="scatter"?`<div class="tile-point-size">
        <input type="range" min="1" max="12" value="3" class="point-size-slider" title="Point size">
        <span class="point-size-label">3px</span>
      </div>`:"";q.innerHTML=`
    <div class="tile-header">
      <input class="tile-name" value="${$.name}" spellcheck="false" />
      <div class="tile-tools">
        <span class="tile-type">${Q}</span>
        <span class="tile-points">1k</span>
        ${B}
        <button class="tile-btn" data-action="reset" title="Reset view">&#x2318;</button>
        <button class="tile-btn" data-action="data" title="Load data source">
          <svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
            <path d="M8 3v8M5 8l3 3 3-3"/>
            <path d="M3 12h10"/>
          </svg>
        </button>
        <button class="tile-btn danger" data-action="close" title="Remove chart">&times;</button>
      </div>
    </div>
    <div class="tile-body"></div>
    <div class="resize-handle resize-n" data-handle="n"></div>
    <div class="resize-handle resize-s" data-handle="s"></div>
    <div class="resize-handle resize-e" data-handle="e"></div>
    <div class="resize-handle resize-w" data-handle="w"></div>
    <div class="resize-handle resize-ne" data-handle="ne"></div>
    <div class="resize-handle resize-nw" data-handle="nw"></div>
    <div class="resize-handle resize-se" data-handle="se"></div>
    <div class="resize-handle resize-sw" data-handle="sw"></div>
  `,q.addEventListener("wheel",(L)=>L.stopPropagation());let J=q.querySelector(".tile-name"),K=j5(J);J.addEventListener("input",()=>{$.name=J.value}),J.addEventListener("mousedown",(L)=>L.stopPropagation()),q._resizeName=K;let j=q.querySelector(".point-size-slider"),F=q.querySelector(".point-size-label");if(j&&F)j.addEventListener("input",()=>{let L=parseInt(j.value);if(F.textContent=L+"px",$.chartId)v.setPointSize($.chartId,L)}),j.addEventListener("mousedown",(L)=>L.stopPropagation());return q.querySelector(".tile-header").addEventListener("mousedown",(L)=>{let U=L.target;if(U.tagName==="INPUT"||U.tagName==="BUTTON"||U.closest("button"))return;if(L.button!==0)return;L.preventDefault(),L.stopPropagation(),q.classList.add("dragging"),Z={type:"drag",chart:$,startMX:L.clientX,startMY:L.clientY,startX:$.x,startY:$.y,startW:$.w,startH:$.h,startPanX:p,startPanY:l}}),q.querySelectorAll(".resize-handle").forEach((L)=>{L.addEventListener("mousedown",(U)=>{U.preventDefault(),U.stopPropagation();let V=L.dataset.handle;q.classList.add("resizing"),Z={type:"resize",chart:$,handle:V,startMX:U.clientX,startMY:U.clientY,startX:$.x,startY:$.y,startW:$.w,startH:$.h,startPanX:p,startPanY:l}})}),q.addEventListener("click",(L)=>{let U=L.target.closest("[data-action]");if(!U)return;let V=U.dataset.action;if(V==="close")b0($.id);if(V==="data")L5($);if(V==="reset"&&$.chartId)v.resetView($.chartId)}),q}function w0($,q){let Q=$.el.querySelector(".tile-points");if(Q)Q.textContent=e0(q)}function X0($){$.el.style.left=$.x+"px",$.el.style.top=$.y+"px"}function V5($){$.el.style.width=$.w+"px",$.el.style.height=$.h+"px"}function L5($){L0=$,q0=null;let q=document.getElementById("data-modal"),Q=document.getElementById("data-url"),B=document.getElementById("data-transform"),J=document.getElementById("data-error");Q.value="",B.value="",J.classList.add("hidden"),J.textContent="";let K=document.getElementById("presets");K.innerHTML="";let j=[],F=new Map;for(let G of U0){if(!F.has(G.category))j.push(G.category),F.set(G.category,[]);F.get(G.category).push(G)}for(let G of j){let L=document.createElement("div");L.className="preset-category";let U=document.createElement("div");U.className="preset-category-header",U.textContent=G,L.appendChild(U);let V=document.createElement("div");V.className="preset-category-items";for(let R of F.get(G)){let _=document.createElement("button");_.className="preset-btn",_.textContent=R.name,_.addEventListener("click",()=>{Q.value=R.url,B.value=R.transform,q0=R.name,J.classList.add("hidden"),K.querySelectorAll(".preset-btn").forEach((k)=>k.classList.remove("active")),_.classList.add("active")}),V.appendChild(_)}L.appendChild(V),K.appendChild(L)}q.classList.add("open")}async function F5($,q){try{let Q=null;if(q.url){let j=await fetch(q.url);if(!j.ok)throw new Error(`Fetch failed: HTTP ${j.status}`);Q=await j.json()}let J=new Function("data","url",q.transform)(Q,q.url);if(!J||!Array.isArray(J.x)||!Array.isArray(J.y))return;if(J.x.length===0)return;v.updateSeries($.chartId,[{label:q.name,color:_0(),x:J.x,y:J.y}]),v.resetView($.chartId),w0($,J.x.length),$.name=q.name;let K=$.el.querySelector(".tile-name");if(K){K.value=$.name;let j=$.el._resizeName;if(j)j()}}catch(Q){console.warn(`Failed to load preset "${q.name}":`,Q)}}function a(){document.getElementById("data-modal").classList.remove("open"),L0=null,q0=null}async function G5(){if(!L0)return;let $=L0,q=document.getElementById("data-url").value.trim(),Q=document.getElementById("data-transform").value.trim(),B=document.getElementById("data-error");if(B.classList.add("hidden"),!Q){B.textContent="Please provide a transform function.",B.classList.remove("hidden");return}try{let J=null;if(q){let G=await fetch(q);if(!G.ok)throw new Error(`Fetch failed: HTTP ${G.status} ${G.statusText}`);J=await G.json()}let j=new Function("data","url",Q)(J,q);if(!j||!Array.isArray(j.x)||!Array.isArray(j.y))throw new Error("Transform must return { x: number[], y: number[] }");if(j.x.length!==j.y.length)throw new Error(`x and y arrays must be same length (got ${j.x.length} and ${j.y.length})`);if(j.x.length===0)throw new Error("Returned data is empty");if(v.updateSeries($.chartId,[{label:$.name,color:_0(),x:j.x,y:j.y}]),v.resetView($.chartId),w0($,j.x.length),/^Chart \d+$/.test($.name)&&q0){$.name=q0;let G=$.el.querySelector(".tile-name");if(G){G.value=$.name;let L=$.el._resizeName;if(L)L()}}a()}catch(J){B.textContent=J.message||String(J),B.classList.remove("hidden")}}function U5(){document.getElementById("modal-close").addEventListener("click",a),document.getElementById("data-cancel").addEventListener("click",a),document.getElementById("data-load").addEventListener("click",G5),document.getElementById("data-modal").addEventListener("mousedown",($)=>{if($.target.classList.contains("modal-overlay"))a()}),document.addEventListener("keydown",($)=>{if($.key==="Escape"){if(document.getElementById("data-modal").classList.contains("open"))a()}})}var C0=0;function A5($,q="error"){let Q=document.getElementById("toast");Q.textContent=$,Q.style.background=q==="success"?"var(--success)":"var(--danger)",Q.classList.remove("hidden"),clearTimeout(C0),C0=window.setTimeout(()=>Q.classList.add("hidden"),3000)}function N5(){let $=document.getElementById("add-btn"),q=document.getElementById("add-menu");$.addEventListener("click",(J)=>{J.stopPropagation(),q.classList.toggle("open")}),q.querySelectorAll("button[data-type]").forEach((J)=>{J.addEventListener("click",()=>{let K=J.dataset.type;V0(K),q.classList.remove("open")})}),document.addEventListener("mousedown",(J)=>{if(!J.target.closest("#add-dropdown"))q.classList.remove("open")});let Q=document.getElementById("sync-toggle"),B=document.getElementById("sync-label");Q.addEventListener("change",()=>{let J=Q.checked;v.setSyncViews(J),B.textContent=J?"Synced":"Sync Off"}),document.getElementById("add-random-5").addEventListener("click",()=>{let J=["line","scatter","bar"];for(let K=0;K<5;K++){let j=U0[Math.floor(Math.random()*U0.length)],F=j.type||J[Math.floor(Math.random()*J.length)],G=T(N0),L=T(R0),U=Z0(G,L);E0(F,U.x+G/2,U.y+L/2);let V=d[d.length-1];if(V)F5(V,j)}}),document.getElementById("clear-all").addEventListener("click",Q5)}function R5(){let $=0,q=new MessageChannel,Q=0,B=0;q.port1.onmessage=()=>{$=performance.now()-Q;let K=performance.now();if(K-B>=120){B=K;let j=(F)=>F<1?F.toFixed(2)+"ms":F.toFixed(1)+"ms";document.getElementById("main-ms").textContent=j($)}};function J(){requestAnimationFrame(()=>{Q=performance.now(),q.port2.postMessage(null),J()})}J()}function _5(){v.onStats(($)=>{document.getElementById("active").textContent=$.active.toString(),document.getElementById("total").textContent=$.total.toString()})}async function Z5(){if(v=E.getInstance(),!await v.init()){A5("WebGPU not available. Please use a supported browser.","error");return}v.setTheme(!0),$5(),N5(),U5(),R5(),_5(),setTimeout(()=>{V0("line"),V0("scatter"),V0("bar")},100)}if(location.hostname==="localhost"||location.hostname==="127.0.0.1"){let $=new WebSocket(`ws://${location.host}/__hot`);$.onmessage=(q)=>{if(q.data==="reload")location.reload()}}Z5();
